2021-06-15 12:40:33.529 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 12:40:33.660 -05:00 [INF] Creating key {b956e2d7-755c-42f3-8de5-bcf6dcdb5e6f} with creation date 2021-06-15 17:40:33Z, activation date 2021-06-15 17:40:33Z, and expiration date 2021-09-13 17:40:33Z.
2021-06-15 12:40:33.690 -05:00 [WRN] No XML encryptor configured. Key {b956e2d7-755c-42f3-8de5-bcf6dcdb5e6f} may be persisted to storage in unencrypted form.
2021-06-15 12:40:33.708 -05:00 [INF] Writing data to file '/Users/saige/.aspnet/DataProtection-Keys/key-b956e2d7-755c-42f3-8de5-bcf6dcdb5e6f.xml'.
2021-06-15 12:40:34.179 -05:00 [WRN] The application is trying to access the ASP.NET Core developer certificate key. A prompt might appear to ask for permission to access the key. When that happens, select 'Always Allow' to grant 'dotnet' access to the certificate key in the future.
2021-06-15 12:40:39.533 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 12:40:39.537 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 12:40:39.540 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 12:40:39.540 -05:00 [INF] Hosting environment: Development
2021-06-15 12:40:39.541 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 12:40:57.099 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 12:40:57.224 -05:00 [INF] Inside the Logger Middleware
2021-06-15 12:40:57.229 -05:00 [INF] Date Time the request came: 06/15/2021 12:40:57
2021-06-15 12:40:57.229 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 12:40:57.232 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 12:40:57.307 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 12:40:57.355 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 12:40:59.063 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 12:40:59.196 -05:00 [INF] Executed ViewResult - view Index executed in 1850.8357ms.
2021-06-15 12:40:59.213 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1903.65ms
2021-06-15 12:40:59.213 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 12:40:59.226 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2131.3382ms
2021-06-15 12:40:59.234 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 12:40:59.238 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 12:40:59.260 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 12:40:59.262 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 27.3520ms
2021-06-15 12:40:59.265 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 12:40:59.268 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 29.9044ms
2021-06-15 12:40:59.318 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 12:40:59.318 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 12:40:59.318 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 12:40:59.319 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 12:40:59.336 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 12:40:59.338 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 19.7394ms
2021-06-15 12:40:59.362 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 12:40:59.362 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 12:40:59.363 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 12:40:59.363 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 44.3563ms
2021-06-15 12:40:59.363 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 44.3522ms
2021-06-15 12:40:59.363 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 43.9653ms
2021-06-15 12:40:59.439 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 12:40:59.441 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 12:40:59.441 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 1.8837ms
2021-06-15 12:41:02.248 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 12:41:02.294 -05:00 [INF] Inside the Logger Middleware
2021-06-15 12:41:02.295 -05:00 [INF] Date Time the request came: 06/15/2021 12:41:02
2021-06-15 12:41:02.295 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 12:41:02.297 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 12:41:02.341 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 12:41:02.356 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 12:41:17.669 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server '127.0.0.1,1401'.
2021-06-15 12:41:17.738 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 12:41:17.773 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15431.2407ms
2021-06-15 12:41:17.775 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 12:41:17.778 -05:00 [INF] Some Exception happened, caught in this middleware: 
2021-06-15 12:41:17.780 -05:00 [ERR] Starting Exception Logging: 
2021-06-15 12:41:17.802 -05:00 [ERR] Exception Message: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
2021-06-15 12:41:17.802 -05:00 [ERR] Exception happened on "2021-06-15T12:41:17.8023830-05:00"
2021-06-15 12:41:17.803 -05:00 [ERR] StackTrace Of Exception    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at MovieShopApp.MVC.Middleware.MovieShopExceptionMiddleware.Invoke(HttpContext httpContext) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Middleware/MovieShopExceptionMiddleware.cs:line 28
2021-06-15 12:41:17.812 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 302 0 - 15570.2662ms
2021-06-15 12:41:17.814 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Home/Error - -
2021-06-15 12:41:17.821 -05:00 [INF] Inside the Logger Middleware
2021-06-15 12:41:17.822 -05:00 [INF] Date Time the request came: 06/15/2021 12:41:17
2021-06-15 12:41:17.822 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 12:41:17.822 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 12:41:17.829 -05:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 12:41:17.838 -05:00 [INF] Executing ViewResult, running view Error.
2021-06-15 12:41:17.907 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 12:41:17.922 -05:00 [INF] Executed ViewResult - view Error executed in 86.5206ms.
2021-06-15 12:41:17.923 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC) in 93.1695ms
2021-06-15 12:41:17.923 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 12:41:17.923 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Home/Error - - - 200 - text/html;+charset=utf-8 109.2716ms
2021-06-15 14:03:32.476 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 14:03:33.161 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 14:03:33.164 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 14:03:33.168 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 14:03:33.169 -05:00 [INF] Hosting environment: Development
2021-06-15 14:03:33.169 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 14:03:33.843 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 14:03:34.011 -05:00 [INF] Inside the Logger Middleware
2021-06-15 14:03:34.017 -05:00 [INF] Date Time the request came: 06/15/2021 14:03:34
2021-06-15 14:03:34.017 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 14:03:34.021 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 14:03:34.096 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 14:03:34.163 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 14:03:36.019 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 14:03:36.160 -05:00 [INF] Executed ViewResult - view Index executed in 2013.2152ms.
2021-06-15 14:03:36.183 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2085.0753ms
2021-06-15 14:03:36.184 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 14:03:36.205 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2360.9083ms
2021-06-15 14:03:36.213 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 14:03:36.214 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 14:03:36.237 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 14:03:36.237 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 14:03:36.248 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 14:03:36.253 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 37.5664ms
2021-06-15 14:03:36.253 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 39.3854ms
2021-06-15 14:03:36.253 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 14:03:36.254 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 6.8209ms
2021-06-15 14:03:36.282 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 14:03:36.282 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 14:03:36.283 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 14:03:36.283 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 14:03:36.283 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 0.7708ms
2021-06-15 14:03:36.283 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 0.7587ms
2021-06-15 14:03:36.303 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 14:03:36.304 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 14:03:36.304 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 0.5983ms
2021-06-15 14:03:44.488 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 14:03:44.513 -05:00 [INF] Inside the Logger Middleware
2021-06-15 14:03:44.514 -05:00 [INF] Date Time the request came: 06/15/2021 14:03:44
2021-06-15 14:03:44.514 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 14:03:44.515 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 14:03:44.564 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 14:03:44.586 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 14:03:59.943 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server '127.0.0.1,1401'.
2021-06-15 14:03:59.989 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 14:04:00.021 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15455.6179ms
2021-06-15 14:04:00.023 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 14:04:00.030 -05:00 [INF] Some Exception happened, caught in this middleware: 
2021-06-15 14:04:00.032 -05:00 [ERR] Starting Exception Logging: 
2021-06-15 14:04:00.056 -05:00 [ERR] Exception Message: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server)
2021-06-15 14:04:00.056 -05:00 [ERR] Exception happened on "2021-06-15T14:04:00.0568890-05:00"
2021-06-15 14:04:00.058 -05:00 [ERR] StackTrace Of Exception    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at MovieShopApp.MVC.Middleware.MovieShopExceptionMiddleware.Invoke(HttpContext httpContext) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Middleware/MovieShopExceptionMiddleware.cs:line 28
2021-06-15 14:04:00.067 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 302 0 - 15581.3818ms
2021-06-15 14:04:00.070 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Home/Error - -
2021-06-15 14:04:00.079 -05:00 [INF] Inside the Logger Middleware
2021-06-15 14:04:00.079 -05:00 [INF] Date Time the request came: 06/15/2021 14:04:00
2021-06-15 14:04:00.079 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 14:04:00.079 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 14:04:00.087 -05:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 14:04:00.096 -05:00 [INF] Executing ViewResult, running view Error.
2021-06-15 14:04:00.163 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 14:04:00.178 -05:00 [INF] Executed ViewResult - view Error executed in 84.6546ms.
2021-06-15 14:04:00.178 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC) in 90.9099ms
2021-06-15 14:04:00.178 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 14:04:00.178 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Home/Error - - - 200 - text/html;+charset=utf-8 108.8479ms
2021-06-15 15:45:11.502 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:45:12.073 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:45:12.089 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:45:12.099 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:45:12.100 -05:00 [INF] Hosting environment: Development
2021-06-15 15:45:12.101 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:45:12.334 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:45:12.486 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:45:12.493 -05:00 [INF] Date Time the request came: 06/15/2021 15:45:12
2021-06-15 15:45:12.493 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:45:12.499 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:45:12.602 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:45:12.685 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:45:14.648 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:45:14.798 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 15:45:14.798 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 15:45:14.798 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 15:45:14.799 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 15:45:14.799 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 15:45:14.800 -05:00 [INF] Executed ViewResult - view Index executed in 2130.9159ms.
2021-06-15 15:45:14.813 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2208.3898ms
2021-06-15 15:45:14.814 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:45:14.831 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 15:45:14.832 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 15:45:14.832 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 15:45:14.832 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 15:45:14.832 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 15:45:14.842 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2513.3237ms
2021-06-15 15:45:14.842 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 40.8284ms
2021-06-15 15:45:14.842 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 39.4842ms
2021-06-15 15:45:14.843 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 40.8455ms
2021-06-15 15:45:14.843 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 41.2172ms
2021-06-15 15:45:14.843 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 40.4005ms
2021-06-15 15:45:14.851 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 15:45:14.852 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 15:45:14.853 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 2.1855ms
2021-06-15 15:45:22.120 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:45:22.166 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:45:22.169 -05:00 [INF] Date Time the request came: 06/15/2021 15:45:22
2021-06-15 15:45:22.169 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:45:22.171 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:45:22.213 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:45:22.229 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:45:37.660 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server '127.0.0.1:1433'.
2021-06-15 15:45:37.719 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:45:37.760 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15546.4519ms
2021-06-15 15:45:37.763 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:45:37.769 -05:00 [INF] Some Exception happened, caught in this middleware: 
2021-06-15 15:45:37.771 -05:00 [ERR] Starting Exception Logging: 
2021-06-15 15:45:37.803 -05:00 [ERR] Exception Message: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
2021-06-15 15:45:37.803 -05:00 [ERR] Exception happened on "2021-06-15T15:45:37.8032080-05:00"
2021-06-15 15:45:37.805 -05:00 [ERR] StackTrace Of Exception    at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at MovieShopApp.MVC.Middleware.MovieShopExceptionMiddleware.Invoke(HttpContext httpContext) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Middleware/MovieShopExceptionMiddleware.cs:line 28
2021-06-15 15:45:37.816 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 302 0 - 15700.2914ms
2021-06-15 15:45:37.818 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Home/Error - -
2021-06-15 15:45:37.830 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:45:37.831 -05:00 [INF] Date Time the request came: 06/15/2021 15:45:37
2021-06-15 15:45:37.831 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:45:37.831 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 15:45:37.847 -05:00 [INF] Route matched with {action = "Error", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:45:37.861 -05:00 [INF] Executing ViewResult, running view Error.
2021-06-15 15:45:37.934 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:45:37.950 -05:00 [INF] Executed ViewResult - view Error executed in 93.9247ms.
2021-06-15 15:45:37.951 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC) in 103.4435ms
2021-06-15 15:45:37.951 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Error (MovieShopApp.MVC)'
2021-06-15 15:45:37.952 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Home/Error - - - 200 - text/html;+charset=utf-8 133.5474ms
2021-06-15 15:46:32.242 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:46:32.756 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:46:32.759 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:46:32.762 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:46:32.763 -05:00 [INF] Hosting environment: Development
2021-06-15 15:46:32.763 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:46:33.408 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:46:33.531 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:46:33.536 -05:00 [INF] Date Time the request came: 06/15/2021 15:46:33
2021-06-15 15:46:33.537 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:46:33.540 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:46:33.616 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:46:33.668 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:46:35.234 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:46:35.366 -05:00 [INF] Executed ViewResult - view Index executed in 1714.4236ms.
2021-06-15 15:46:35.373 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1754.6917ms
2021-06-15 15:46:35.374 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:46:35.392 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 1984.8694ms
2021-06-15 15:46:41.247 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:46:41.283 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:46:41.284 -05:00 [INF] Date Time the request came: 06/15/2021 15:46:41
2021-06-15 15:46:41.284 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:46:41.286 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:46:41.328 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:46:41.347 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:46:56.730 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server '127.0.0.1:1433'.
2021-06-15 15:46:56.794 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:46:56.813 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15483.7318ms
2021-06-15 15:46:56.814 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:46:56.822 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:46:56.931 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 15689.0182ms
2021-06-15 15:49:32.531 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:49:33.034 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:49:33.037 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:49:33.039 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:49:33.040 -05:00 [INF] Hosting environment: Development
2021-06-15 15:49:33.040 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:49:33.767 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:49:33.893 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:49:33.898 -05:00 [INF] Date Time the request came: 06/15/2021 15:49:33
2021-06-15 15:49:33.898 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:49:33.901 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:49:33.974 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:49:34.024 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:49:35.786 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:49:35.930 -05:00 [INF] Executed ViewResult - view Index executed in 1922.1512ms.
2021-06-15 15:49:35.938 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1961.39ms
2021-06-15 15:49:35.938 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:49:35.953 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2190.4736ms
2021-06-15 15:49:36.912 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:49:36.952 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:49:36.955 -05:00 [INF] Date Time the request came: 06/15/2021 15:49:36
2021-06-15 15:49:36.955 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:49:36.956 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:49:37.006 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:49:37.028 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:49:37.107 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 99.2557ms
2021-06-15 15:49:37.108 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:49:37.111 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'microsoft sql server - master@localhost;database'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 15:49:37.208 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 306.6988ms
2021-06-15 15:51:05.259 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:51:05.766 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:51:05.770 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:51:05.772 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:51:05.773 -05:00 [INF] Hosting environment: Development
2021-06-15 15:51:05.773 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:51:06.443 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:51:06.563 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:51:06.567 -05:00 [INF] Date Time the request came: 06/15/2021 15:51:06
2021-06-15 15:51:06.567 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:51:06.571 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:51:06.644 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:51:06.694 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:51:08.367 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:51:08.488 -05:00 [INF] Executed ViewResult - view Index executed in 1811.2404ms.
2021-06-15 15:51:08.496 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1850.1311ms
2021-06-15 15:51:08.497 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:51:08.512 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2072.7292ms
2021-06-15 15:51:09.743 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:51:09.783 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:51:09.784 -05:00 [INF] Date Time the request came: 06/15/2021 15:51:09
2021-06-15 15:51:09.785 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:51:09.786 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:51:09.825 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:51:09.843 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:51:09.897 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 70.7107ms
2021-06-15 15:51:09.898 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:51:09.901 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'master@localhost;database'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 15:51:10.005 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 266.0647ms
2021-06-15 15:54:13.639 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:54:14.140 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:54:14.142 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:54:14.145 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:54:14.145 -05:00 [INF] Hosting environment: Development
2021-06-15 15:54:14.146 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:54:14.862 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:54:14.984 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:54:14.988 -05:00 [INF] Date Time the request came: 06/15/2021 15:54:14
2021-06-15 15:54:14.989 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:54:14.991 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:15.065 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:54:15.118 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:54:16.724 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:54:16.928 -05:00 [INF] Executed ViewResult - view Index executed in 1810.6063ms.
2021-06-15 15:54:16.936 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1868.9664ms
2021-06-15 15:54:16.937 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:16.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2108.2082ms
2021-06-15 15:54:17.944 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:54:17.977 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:54:17.979 -05:00 [INF] Date Time the request came: 06/15/2021 15:54:17
2021-06-15 15:54:17.979 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:54:17.982 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:18.022 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:54:18.043 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:54:18.129 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 106.892ms
2021-06-15 15:54:18.131 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:18.134 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'name'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 15:54:18.254 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 315.8858ms
2021-06-15 15:54:37.309 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:54:37.894 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:54:37.898 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:54:37.901 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:54:37.902 -05:00 [INF] Hosting environment: Development
2021-06-15 15:54:37.902 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:54:38.391 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:54:38.550 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:54:38.555 -05:00 [INF] Date Time the request came: 06/15/2021 15:54:38
2021-06-15 15:54:38.555 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:54:38.561 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:38.661 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:54:38.731 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:54:40.394 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:54:40.522 -05:00 [INF] Executed ViewResult - view Index executed in 1815.7978ms.
2021-06-15 15:54:40.530 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1866.7116ms
2021-06-15 15:54:40.531 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:40.557 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2168.2755ms
2021-06-15 15:54:41.604 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:54:41.641 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:54:41.642 -05:00 [INF] Date Time the request came: 06/15/2021 15:54:41
2021-06-15 15:54:41.642 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:54:41.644 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:41.690 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:54:41.707 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:54:41.802 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 110.8019ms
2021-06-15 15:54:41.804 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:41.808 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'name'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 15:54:41.919 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 319.8160ms
2021-06-15 15:54:58.549 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:54:59.152 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:54:59.156 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:54:59.158 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:54:59.159 -05:00 [INF] Hosting environment: Development
2021-06-15 15:54:59.159 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:54:59.462 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:54:59.597 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:54:59.602 -05:00 [INF] Date Time the request came: 06/15/2021 15:54:59
2021-06-15 15:54:59.603 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:54:59.608 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:54:59.681 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:54:59.745 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:55:01.449 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:55:01.590 -05:00 [INF] Executed ViewResult - view Index executed in 1867.6617ms.
2021-06-15 15:55:01.597 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1913.3899ms
2021-06-15 15:55:01.598 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:55:01.613 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2156.5069ms
2021-06-15 15:55:02.509 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:55:02.544 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:55:02.547 -05:00 [INF] Date Time the request came: 06/15/2021 15:55:02
2021-06-15 15:55:02.547 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:55:02.549 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:55:02.590 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:55:02.611 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:55:18.065 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server 'LOCAL'.
2021-06-15 15:55:18.125 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:55:18.143 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15552.5445ms
2021-06-15 15:55:18.146 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:55:18.154 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:55:18.257 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 15751.1725ms
2021-06-15 15:57:02.522 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:57:03.129 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:57:03.133 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:57:03.136 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:57:03.136 -05:00 [INF] Hosting environment: Development
2021-06-15 15:57:03.136 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:57:03.713 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:57:03.837 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:57:03.842 -05:00 [INF] Date Time the request came: 06/15/2021 15:57:03
2021-06-15 15:57:03.842 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:57:03.846 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:03.916 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:57:03.968 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:57:05.722 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:57:05.862 -05:00 [INF] Executed ViewResult - view Index executed in 1910.7245ms.
2021-06-15 15:57:05.869 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1950.9922ms
2021-06-15 15:57:05.870 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:05.885 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2177.1840ms
2021-06-15 15:57:06.778 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:57:06.815 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:57:06.818 -05:00 [INF] Date Time the request came: 06/15/2021 15:57:06
2021-06-15 15:57:06.818 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:57:06.820 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:06.859 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:57:06.877 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:57:06.955 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 94.685ms
2021-06-15 15:57:06.957 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:06.961 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'port'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Collections.Generic.IAsyncEnumerable<TEntity>.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 15:57:07.078 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 304.5109ms
2021-06-15 15:57:22.473 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 15:57:22.984 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 15:57:22.986 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 15:57:22.989 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 15:57:22.989 -05:00 [INF] Hosting environment: Development
2021-06-15 15:57:22.989 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 15:57:23.572 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 15:57:23.697 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:57:23.701 -05:00 [INF] Date Time the request came: 06/15/2021 15:57:23
2021-06-15 15:57:23.702 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:57:23.706 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:23.777 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 15:57:23.839 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 15:57:25.403 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:57:25.526 -05:00 [INF] Executed ViewResult - view Index executed in 1707.4852ms.
2021-06-15 15:57:25.533 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1753.2527ms
2021-06-15 15:57:25.533 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:25.548 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 1981.4290ms
2021-06-15 15:57:27.091 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 15:57:27.129 -05:00 [INF] Inside the Logger Middleware
2021-06-15 15:57:27.131 -05:00 [INF] Date Time the request came: 06/15/2021 15:57:27
2021-06-15 15:57:27.131 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 15:57:27.133 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:27.173 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 15:57:27.190 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 15:57:42.602 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server 'LOCAL'.
2021-06-15 15:57:42.663 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:57:42.680 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15506.6092ms
2021-06-15 15:57:42.682 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 15:57:42.690 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 15:57:42.813 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 15725.5619ms
2021-06-15 16:02:28.870 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:02:29.402 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:02:29.405 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:02:29.410 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:02:29.411 -05:00 [INF] Hosting environment: Development
2021-06-15 16:02:29.411 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:02:29.917 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:02:30.041 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:02:30.046 -05:00 [INF] Date Time the request came: 06/15/2021 16:02:30
2021-06-15 16:02:30.046 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:02:30.050 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:02:30.121 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:02:30.179 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:02:31.950 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:02:32.079 -05:00 [INF] Executed ViewResult - view Index executed in 1922.9975ms.
2021-06-15 16:02:32.086 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1962.2868ms
2021-06-15 16:02:32.086 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:02:32.102 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2191.2492ms
2021-06-15 16:02:33.240 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:02:33.275 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:02:33.277 -05:00 [INF] Date Time the request came: 06/15/2021 16:02:33
2021-06-15 16:02:33.277 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:02:33.278 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:02:33.318 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:02:33.336 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:02:33.950 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server 'LOCAL\2b46ebe2c62f'.
2021-06-15 16:02:33.988 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
System.Exception: Cannot connect to SQL Server Browser. Ensure SQL Server Browser has been started.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at System.Net.Sockets.UdpClient.GetEndpoint(String hostname, Int32 port)
   at System.Net.Sockets.UdpClient.SendAsync(Byte[] datagram, Int32 bytes, String hostname, Int32 port)
   at Microsoft.Data.SqlClient.SNI.SSRP.SendUDPRequest(String browserHostname, Int32 port, Byte[] requestPacket)
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   --- End of inner exception stack trace ---
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateTcpHandle(DataSource details, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateConnectionHandle(Object callbackObject, String fullServerName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, Boolean isIntegratedSecurity, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.CreatePhysicalSNIHandle(String serverName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo, Boolean isIntegratedSecurity)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Exception: Cannot connect to SQL Server Browser. Ensure SQL Server Browser has been started.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at System.Net.Sockets.UdpClient.GetEndpoint(String hostname, Int32 port)
   at System.Net.Sockets.UdpClient.SendAsync(Byte[] datagram, Int32 bytes, String hostname, Int32 port)
   at Microsoft.Data.SqlClient.SNI.SSRP.SendUDPRequest(String browserHostname, Int32 port, Byte[] requestPacket)
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   --- End of inner exception stack trace ---
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateTcpHandle(DataSource details, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateConnectionHandle(Object callbackObject, String fullServerName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, Boolean isIntegratedSecurity, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.CreatePhysicalSNIHandle(String serverName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo, Boolean isIntegratedSecurity)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2021-06-15 16:02:34.006 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 686.947ms
2021-06-15 16:02:34.008 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:02:34.016 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot connect to SQL Server Browser. Ensure SQL Server Browser has been started.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at System.Net.Sockets.UdpClient.GetEndpoint(String hostname, Int32 port)
   at System.Net.Sockets.UdpClient.SendAsync(Byte[] datagram, Int32 bytes, String hostname, Int32 port)
   at Microsoft.Data.SqlClient.SNI.SSRP.SendUDPRequest(String browserHostname, Int32 port, Byte[] requestPacket)
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   --- End of inner exception stack trace ---
   at Microsoft.Data.SqlClient.SNI.SSRP.GetPortByInstanceName(String browserHostName, String instanceName)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateTcpHandle(DataSource details, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.CreateConnectionHandle(Object callbackObject, String fullServerName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, Boolean isIntegratedSecurity, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.CreatePhysicalSNIHandle(String serverName, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Byte[]& instanceName, Byte[]& spnBuffer, Boolean flushCache, Boolean async, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo, Boolean isIntegratedSecurity)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 16:02:34.108 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 872.7899ms
2021-06-15 16:07:25.151 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:07:25.658 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:07:25.663 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:07:25.667 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:07:25.667 -05:00 [INF] Hosting environment: Development
2021-06-15 16:07:25.667 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:07:26.394 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:07:26.561 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:07:26.567 -05:00 [INF] Date Time the request came: 06/15/2021 16:07:26
2021-06-15 16:07:26.567 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:07:26.572 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:07:26.674 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:07:26.736 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:07:28.702 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:07:28.859 -05:00 [INF] Executed ViewResult - view Index executed in 2139.6359ms.
2021-06-15 16:07:28.860 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 16:07:28.860 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 16:07:28.860 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 16:07:28.860 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 16:07:28.860 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 16:07:28.871 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2193.8163ms
2021-06-15 16:07:28.874 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:07:28.899 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 16:07:28.899 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 16:07:28.899 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 16:07:28.900 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 16:07:28.900 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 47.2842ms
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 46.5335ms
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2514.7237ms
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 46.0785ms
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 47.5227ms
2021-06-15 16:07:28.908 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 47.1153ms
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 16:07:28.918 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 16:07:28.920 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 16:07:28.920 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 16:07:28.920 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 16:07:28.920 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 16:07:28.920 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 16:07:28.920 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 2.9432ms
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 3.4173ms
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 3.0277ms
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 3.3188ms
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 3.6165ms
2021-06-15 16:07:28.921 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 3.5135ms
2021-06-15 16:07:28.923 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 16:07:28.923 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 16:07:28.923 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 0.1994ms
2021-06-15 16:07:37.493 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:07:38.001 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:07:38.003 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:07:38.005 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:07:38.005 -05:00 [INF] Hosting environment: Development
2021-06-15 16:07:38.005 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:07:38.394 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:07:38.506 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:07:38.510 -05:00 [INF] Date Time the request came: 06/15/2021 16:07:38
2021-06-15 16:07:38.510 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:07:38.514 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:07:38.587 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:07:38.633 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:07:40.138 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:07:40.276 -05:00 [INF] Executed ViewResult - view Index executed in 1657.9075ms.
2021-06-15 16:07:40.282 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1692.7967ms
2021-06-15 16:07:40.282 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:07:40.297 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 1907.9427ms
2021-06-15 16:08:07.354 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:08:07.392 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:08:07.393 -05:00 [INF] Date Time the request came: 06/15/2021 16:08:07
2021-06-15 16:08:07.393 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:08:07.395 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:08:07.434 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:08:07.458 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:08:22.957 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server '2b46ebe2c62f'.
2021-06-15 16:08:23.021 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 16:08:23.039 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 15603.0388ms
2021-06-15 16:08:23.041 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:08:23.049 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 35 - An internal exception was caught)
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (00000005, 0xFFFDFFFF): nodename nor servname provided, or not known
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle.Connect(String serverName, Int32 port, TimeSpan timeout, Boolean isInfiniteTimeout, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SNI.SNITCPHandle..ctor(String serverName, Int32 port, Int64 timerExpire, Object callbackObject, Boolean parallel, String cachedFQDN, SQLDNSInfo& pendingDNSInfo)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover, SqlAuthenticationMethod authType)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
2021-06-15 16:08:23.168 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 15817.9479ms
2021-06-15 16:11:04.974 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:11:05.552 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:11:05.556 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:11:05.559 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:11:05.560 -05:00 [INF] Hosting environment: Development
2021-06-15 16:11:05.560 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:11:06.139 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:11:06.279 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:11:06.286 -05:00 [INF] Date Time the request came: 06/15/2021 16:11:06
2021-06-15 16:11:06.286 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:11:06.290 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:11:06.380 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:11:06.446 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:11:08.245 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:11:08.385 -05:00 [INF] Executed ViewResult - view Index executed in 1963.645ms.
2021-06-15 16:11:08.398 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2015.7057ms
2021-06-15 16:11:08.399 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:11:08.415 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2281.0005ms
2021-06-15 16:11:09.869 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:11:09.905 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:11:09.907 -05:00 [INF] Date Time the request came: 06/15/2021 16:11:09
2021-06-15 16:11:09.907 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:11:09.909 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:11:09.949 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:11:09.967 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:11:10.914 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server 'localhost'.
2021-06-15 16:11:10.936 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot authenticate using Kerberos. Ensure Kerberos has been initialized on the client with 'kinit' and a Service Principal Name has been registered for the SQL Server to allow Kerberos authentication.
ErrorCode=InternalError, Exception=Interop+NetSecurityNative+GssApiException: GSSAPI operation failed with error -  An unsupported mechanism was requested (unknown mech-code 0 for mech unknown).
   at System.Net.Security.NegotiateStreamPal.GssInitSecurityContext(SafeGssContextHandle& context, SafeGssCredHandle credential, Boolean isNtlm, SafeGssNameHandle targetName, GssFlags inFlags, Byte[] buffer, Byte[]& outputBuffer, UInt32& outFlags, Int32& isNtlmUsed)
   at System.Net.Security.NegotiateStreamPal.EstablishSecurityContext(SafeFreeNegoCredentials credential, SafeDeleteContext& context, String targetName, ContextFlagsPal inFlags, SecurityBuffer inputBuffer, SecurityBuffer outputBuffer, ContextFlagsPal& outFlags)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.GenSspiClientContext(SspiClientContextStatus sspiClientContextStatus, Byte[] receivedBuff, Byte[]& sendBuff, Byte[] serverName)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.GenerateSspiClientContext(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength, Byte[] _sniSpnBuffer)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.SSPIError(String error, String procedure)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.SSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, Nullable`1 fedAuthFeatureExtensionData)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3a8cd69b-c964-4ca9-8dee-2da8cf24a16b
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot authenticate using Kerberos. Ensure Kerberos has been initialized on the client with 'kinit' and a Service Principal Name has been registered for the SQL Server to allow Kerberos authentication.
ErrorCode=InternalError, Exception=Interop+NetSecurityNative+GssApiException: GSSAPI operation failed with error -  An unsupported mechanism was requested (unknown mech-code 0 for mech unknown).
   at System.Net.Security.NegotiateStreamPal.GssInitSecurityContext(SafeGssContextHandle& context, SafeGssCredHandle credential, Boolean isNtlm, SafeGssNameHandle targetName, GssFlags inFlags, Byte[] buffer, Byte[]& outputBuffer, UInt32& outFlags, Int32& isNtlmUsed)
   at System.Net.Security.NegotiateStreamPal.EstablishSecurityContext(SafeFreeNegoCredentials credential, SafeDeleteContext& context, String targetName, ContextFlagsPal inFlags, SecurityBuffer inputBuffer, SecurityBuffer outputBuffer, ContextFlagsPal& outFlags)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.GenSspiClientContext(SspiClientContextStatus sspiClientContextStatus, Byte[] receivedBuff, Byte[]& sendBuff, Byte[] serverName)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.GenerateSspiClientContext(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength, Byte[] _sniSpnBuffer)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.SSPIError(String error, String procedure)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.SSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, Nullable`1 fedAuthFeatureExtensionData)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3a8cd69b-c964-4ca9-8dee-2da8cf24a16b
2021-06-15 16:11:10.954 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1003.6529ms
2021-06-15 16:11:10.956 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:11:10.963 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot authenticate using Kerberos. Ensure Kerberos has been initialized on the client with 'kinit' and a Service Principal Name has been registered for the SQL Server to allow Kerberos authentication.
ErrorCode=InternalError, Exception=Interop+NetSecurityNative+GssApiException: GSSAPI operation failed with error -  An unsupported mechanism was requested (unknown mech-code 0 for mech unknown).
   at System.Net.Security.NegotiateStreamPal.GssInitSecurityContext(SafeGssContextHandle& context, SafeGssCredHandle credential, Boolean isNtlm, SafeGssNameHandle targetName, GssFlags inFlags, Byte[] buffer, Byte[]& outputBuffer, UInt32& outFlags, Int32& isNtlmUsed)
   at System.Net.Security.NegotiateStreamPal.EstablishSecurityContext(SafeFreeNegoCredentials credential, SafeDeleteContext& context, String targetName, ContextFlagsPal inFlags, SecurityBuffer inputBuffer, SecurityBuffer outputBuffer, ContextFlagsPal& outFlags)
   at Microsoft.Data.SqlClient.SNI.SNIProxy.GenSspiClientContext(SspiClientContextStatus sspiClientContextStatus, Byte[] receivedBuff, Byte[]& sendBuff, Byte[] serverName)
   at Microsoft.Data.SqlClient.SNI.TdsParserStateObjectManaged.GenerateSspiClientContext(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength, Byte[] _sniSpnBuffer)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.SSPIError(String error, String procedure)
   at Microsoft.Data.SqlClient.TdsParser.SNISSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.SSPIData(Byte[] receivedBuff, UInt32 receivedLength, Byte[]& sendBuff, UInt32& sendLength)
   at Microsoft.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec, FeatureExtension requestedFeatures, SessionData recoverySessionData, Nullable`1 fedAuthFeatureExtensionData)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword, SecureString newSecurePassword)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:3a8cd69b-c964-4ca9-8dee-2da8cf24a16b
2021-06-15 16:11:11.070 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 1205.2807ms
2021-06-15 16:12:41.766 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:12:42.277 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:12:42.280 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:12:42.282 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:12:42.283 -05:00 [INF] Hosting environment: Development
2021-06-15 16:12:42.283 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:12:42.884 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:12:43.003 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:12:43.009 -05:00 [INF] Date Time the request came: 06/15/2021 16:12:43
2021-06-15 16:12:43.009 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:12:43.012 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:12:43.091 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:12:43.146 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:12:44.877 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:12:45.004 -05:00 [INF] Executed ViewResult - view Index executed in 1874.7935ms.
2021-06-15 16:12:45.016 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1922.6007ms
2021-06-15 16:12:45.016 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:12:45.034 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2153.4487ms
2021-06-15 16:12:46.280 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:12:46.315 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:12:46.317 -05:00 [INF] Date Time the request came: 06/15/2021 16:12:46
2021-06-15 16:12:46.317 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:12:46.318 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:12:46.361 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:12:46.382 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:12:47.161 -05:00 [ERR] An error occurred using the connection to database 'MovieShop' on server 'localhost'.
2021-06-15 16:12:47.202 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "MovieShop" requested by the login. The login failed.
Login failed for user 'sa'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bc807241-139f-4100-9cdd-db06767284b9
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "MovieShop" requested by the login. The login failed.
Login failed for user 'sa'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bc807241-139f-4100-9cdd-db06767284b9
Error Number:4060,State:1,Class:11
2021-06-15 16:12:47.219 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 857.8165ms
2021-06-15 16:12:47.221 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:12:47.229 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "MovieShop" requested by the login. The login failed.
Login failed for user 'sa'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:bc807241-139f-4100-9cdd-db06767284b9
Error Number:4060,State:1,Class:11
2021-06-15 16:12:47.324 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 1047.6341ms
2021-06-15 16:13:16.117 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:13:16.620 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:13:16.623 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:13:16.625 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:13:16.625 -05:00 [INF] Hosting environment: Development
2021-06-15 16:13:16.626 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:13:17.298 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:13:17.415 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:13:17.419 -05:00 [INF] Date Time the request came: 06/15/2021 16:13:17
2021-06-15 16:13:17.419 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:13:17.422 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:13:17.501 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:13:17.554 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:13:19.103 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:13:19.243 -05:00 [INF] Executed ViewResult - view Index executed in 1708.18ms.
2021-06-15 16:13:19.250 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1747.0601ms
2021-06-15 16:13:19.251 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:13:19.265 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 1972.2526ms
2021-06-15 16:13:24.092 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:13:24.130 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:13:24.131 -05:00 [INF] Date Time the request came: 06/15/2021 16:13:24
2021-06-15 16:13:24.131 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:13:24.132 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:13:24.172 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:13:24.190 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:13:25.001 -05:00 [ERR] Failed executing DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 16:13:25.055 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:43daccb4-4b40-4392-8266-cbf859162d27
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:43daccb4-4b40-4392-8266-cbf859162d27
Error Number:208,State:1,Class:16
2021-06-15 16:13:25.071 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 898.2946ms
2021-06-15 16:13:25.073 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:13:25.081 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:43daccb4-4b40-4392-8266-cbf859162d27
Error Number:208,State:1,Class:16
2021-06-15 16:13:25.170 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 1082.1112ms
2021-06-15 16:15:28.613 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:15:29.160 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:15:29.163 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:15:29.165 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:15:29.165 -05:00 [INF] Hosting environment: Development
2021-06-15 16:15:29.166 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:15:29.718 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:15:29.881 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:15:29.887 -05:00 [INF] Date Time the request came: 06/15/2021 16:15:29
2021-06-15 16:15:29.887 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:15:29.891 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:15:29.973 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:15:30.036 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:15:31.735 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:15:31.883 -05:00 [INF] Executed ViewResult - view Index executed in 1869.3154ms.
2021-06-15 16:15:31.890 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 1915.314ms
2021-06-15 16:15:31.891 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:15:31.910 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2197.1883ms
2021-06-15 16:15:32.962 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:15:33.000 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:15:33.002 -05:00 [INF] Date Time the request came: 06/15/2021 16:15:33
2021-06-15 16:15:33.002 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:15:33.004 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:15:33.048 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:15:33.066 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:15:33.914 -05:00 [ERR] Failed executing DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 16:15:33.966 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.DataContext.MovieShopDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:f4afc04f-7fce-416e-9c27-e7ca6d13684a
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:f4afc04f-7fce-416e-9c27-e7ca6d13684a
Error Number:208,State:1,Class:16
2021-06-15 16:15:33.982 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 932.7746ms
2021-06-15 16:15:33.983 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:15:33.991 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Movie'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Infrastructure.Repositories.EfRepository`1.ListAllAsync() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/EfRepository.cs:line 65
   at Infrastructure.Services.MovieService.GetTopRevenueMovies() in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 85
   at MovieShopApp.MVC.Controllers.MovieController.Index() in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 22
   at lambda_method37(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:f4afc04f-7fce-416e-9c27-e7ca6d13684a
Error Number:208,State:1,Class:16
2021-06-15 16:15:34.086 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 500 - text/html;+charset=utf-8 1128.9437ms
2021-06-15 16:44:49.674 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 16:44:50.229 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 16:44:50.233 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 16:44:50.236 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 16:44:50.237 -05:00 [INF] Hosting environment: Development
2021-06-15 16:44:50.238 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 16:44:50.965 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 16:44:51.198 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:44:51.204 -05:00 [INF] Date Time the request came: 06/15/2021 16:44:51
2021-06-15 16:44:51.204 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:44:51.215 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:44:51.310 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 16:44:51.388 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:44:53.362 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:44:53.527 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 16:44:53.527 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 16:44:53.527 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 16:44:53.527 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 16:44:53.527 -05:00 [INF] Executed ViewResult - view Index executed in 2160.7564ms.
2021-06-15 16:44:53.527 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 16:44:53.550 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2234.1909ms
2021-06-15 16:44:53.551 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 16:44:53.569 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 16:44:53.570 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 16:44:53.570 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 16:44:53.570 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 16:44:53.570 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 16:44:53.584 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 51.1280ms
2021-06-15 16:44:53.584 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 51.0648ms
2021-06-15 16:44:53.584 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 51.2359ms
2021-06-15 16:44:53.583 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 51.0733ms
2021-06-15 16:44:53.584 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 51.2589ms
2021-06-15 16:44:53.587 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2628.5031ms
2021-06-15 16:44:53.601 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 16:44:53.603 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 16:44:53.604 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 2.9297ms
2021-06-15 16:44:54.776 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 16:44:54.803 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:44:54.806 -05:00 [INF] Date Time the request came: 06/15/2021 16:44:54
2021-06-15 16:44:54.806 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:44:54.808 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:44:54.871 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:44:54.896 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:44:55.924 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 16:44:56.754 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 16:44:56.806 -05:00 [INF] Executed ViewResult - view Index executed in 57.8702ms.
2021-06-15 16:44:56.810 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1939.0889ms
2021-06-15 16:44:56.812 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 16:44:56.820 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 2045.6398ms
2021-06-15 16:44:58.275 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/29 - -
2021-06-15 16:44:58.292 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:44:58.292 -05:00 [INF] Date Time the request came: 06/15/2021 16:44:58
2021-06-15 16:44:58.292 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:44:58.293 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 16:44:58.318 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 16:44:58.353 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:44:58.686 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 16:44:58.862 -05:00 [INF] Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 16:44:58.985 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 16:44:59.065 -05:00 [INF] Executed DbCommand (61ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 16:44:59.098 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 16:44:59.108 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 789.1728ms
2021-06-15 16:44:59.108 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 16:44:59.110 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Average[TSource](IEnumerable`1 source, Func`2 selector)
   at Infrastructure.Repositories.ReviewRepository.GetAvgReviewRatingByMovie(Int32 movieId) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/ReviewRepository.cs:line 32
   at Infrastructure.Services.MovieService.GetMovieDetailsById(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 53
   at MovieShopApp.MVC.Controllers.MovieController.Details(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 29
   at lambda_method185(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 16:44:59.238 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/29 - - - 500 - text/html;+charset=utf-8 966.2806ms
2021-06-15 16:45:07.789 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Register - -
2021-06-15 16:45:07.808 -05:00 [INF] Inside the Logger Middleware
2021-06-15 16:45:07.808 -05:00 [INF] Date Time the request came: 06/15/2021 16:45:07
2021-06-15 16:45:07.808 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 16:45:07.808 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 16:45:07.815 -05:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register() on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 16:45:07.823 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 16:45:08.317 -05:00 [INF] Executing ViewResult, running view Register.
2021-06-15 16:45:08.492 -05:00 [INF] Executed ViewResult - view Register executed in 177.7528ms.
2021-06-15 16:45:08.493 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC) in 677.5283ms
2021-06-15 16:45:08.493 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 16:45:08.494 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Register - - - 200 - text/html;+charset=utf-8 708.7645ms
2021-06-15 16:45:08.515 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - -
2021-06-15 16:45:08.515 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - -
2021-06-15 16:45:08.556 -05:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'
2021-06-15 16:45:08.556 -05:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery-validation/dist/jquery.validate.min.js'
2021-06-15 16:45:08.557 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - - - 200 23261 application/javascript 42.1334ms
2021-06-15 16:45:08.557 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - - - 200 5867 application/javascript 42.2224ms
2021-06-15 17:36:59.337 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 17:36:59.879 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 17:36:59.883 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 17:36:59.886 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 17:36:59.886 -05:00 [INF] Hosting environment: Development
2021-06-15 17:36:59.886 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 17:37:00.543 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 17:37:00.753 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:00.763 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:00
2021-06-15 17:37:00.764 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:00.769 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:00.866 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 17:37:00.939 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 17:37:02.733 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:02.915 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 17:37:02.915 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 17:37:02.915 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 17:37:02.915 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 17:37:02.915 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 17:37:02.920 -05:00 [INF] Executed ViewResult - view Index executed in 1989.9452ms.
2021-06-15 17:37:02.936 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2066.7246ms
2021-06-15 17:37:02.937 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:02.954 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 17:37:02.954 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 17:37:02.954 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 17:37:02.954 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 17:37:02.954 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 17:37:02.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 48.4024ms
2021-06-15 17:37:02.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 48.3961ms
2021-06-15 17:37:02.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 48.4865ms
2021-06-15 17:37:02.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 48.1141ms
2021-06-15 17:37:02.971 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 48.2412ms
2021-06-15 17:37:02.978 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2452.5640ms
2021-06-15 17:37:02.981 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 17:37:02.982 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 17:37:02.982 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 17:37:02.982 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 17:37:02.982 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 17:37:02.982 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 17:37:02.984 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 17:37:02.984 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 17:37:02.984 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 17:37:02.984 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 17:37:02.984 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 17:37:02.984 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 17:37:02.984 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 3.1734ms
2021-06-15 17:37:02.984 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 2.9068ms
2021-06-15 17:37:02.985 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 3.2165ms
2021-06-15 17:37:02.985 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 2.8345ms
2021-06-15 17:37:02.985 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 3.0125ms
2021-06-15 17:37:02.985 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 3.3364ms
2021-06-15 17:37:02.987 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 17:37:02.987 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 17:37:02.987 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 0.5013ms
2021-06-15 17:37:05.247 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 17:37:05.298 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:05.300 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:05
2021-06-15 17:37:05.300 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:05.301 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:05.340 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 17:37:05.362 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:06.248 -05:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 17:37:06.829 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 17:37:06.873 -05:00 [INF] Executed ViewResult - view Index executed in 50.1714ms.
2021-06-15 17:37:06.877 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1536.7818ms
2021-06-15 17:37:06.879 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:06.886 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1647.7768ms
2021-06-15 17:37:09.369 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Login - -
2021-06-15 17:37:09.398 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:09.398 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:09
2021-06-15 17:37:09.398 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:09.399 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:09.419 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login() on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:37:09.459 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:09.854 -05:00 [INF] Executing ViewResult, running view Login.
2021-06-15 17:37:09.953 -05:00 [INF] Executed ViewResult - view Login executed in 101.4553ms.
2021-06-15 17:37:09.954 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 534.5838ms
2021-06-15 17:37:09.954 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:09.954 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Login - - - 200 - text/html;+charset=utf-8 588.2807ms
2021-06-15 17:37:09.976 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - -
2021-06-15 17:37:09.976 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - -
2021-06-15 17:37:09.983 -05:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js was not modified
2021-06-15 17:37:09.983 -05:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2021-06-15 17:37:09.984 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - - - 304 - application/javascript 7.5756ms
2021-06-15 17:37:09.984 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - - - 304 - application/javascript 7.5114ms
2021-06-15 17:37:17.810 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235
2021-06-15 17:37:17.822 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:17.822 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:17
2021-06-15 17:37:17.822 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:17.823 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:17.847 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ApplicationCore.Models.Request.LoginRequestModel) on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:37:17.851 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:18.318 -05:00 [INF] Executed DbCommand (181ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='300']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[HashedPassword], [u].[IsLocked], [u].[LastLoginDateTime], [u].[LastName], [u].[LockoutEndDate], [u].[PhoneNumber], [u].[Salt], [u].[TwoFactorEnabled]
FROM [User] AS [u]
WHERE [u].[Email] = @__email_0
2021-06-15 17:37:18.328 -05:00 [INF] Executing ViewResult, running view Login.
2021-06-15 17:37:18.344 -05:00 [INF] Executed ViewResult - view Login executed in 15.6801ms.
2021-06-15 17:37:18.344 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 496.9029ms
2021-06-15 17:37:18.344 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:18.345 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235 - 200 - text/html;+charset=utf-8 538.2125ms
2021-06-15 17:37:23.083 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235
2021-06-15 17:37:23.089 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:23.090 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:23
2021-06-15 17:37:23.090 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:23.091 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:23.095 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ApplicationCore.Models.Request.LoginRequestModel) on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:37:23.110 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:23.186 -05:00 [INF] Executed DbCommand (36ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='300']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[HashedPassword], [u].[IsLocked], [u].[LastLoginDateTime], [u].[LastName], [u].[LockoutEndDate], [u].[PhoneNumber], [u].[Salt], [u].[TwoFactorEnabled]
FROM [User] AS [u]
WHERE [u].[Email] = @__email_0
2021-06-15 17:37:23.188 -05:00 [INF] Executing ViewResult, running view Login.
2021-06-15 17:37:23.197 -05:00 [INF] Executed ViewResult - view Login executed in 9.1305ms.
2021-06-15 17:37:23.198 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 102.416ms
2021-06-15 17:37:23.198 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:37:23.198 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235 - 200 - text/html;+charset=utf-8 116.4470ms
2021-06-15 17:37:25.346 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 17:37:25.349 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:25.349 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:25
2021-06-15 17:37:25.350 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:25.350 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:25.352 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 17:37:25.356 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 17:37:25.371 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:25.377 -05:00 [INF] Executed ViewResult - view Index executed in 22.027ms.
2021-06-15 17:37:25.378 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 25.63ms
2021-06-15 17:37:25.378 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:37:25.381 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 35.3227ms
2021-06-15 17:37:27.438 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Register - -
2021-06-15 17:37:27.442 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:37:27.442 -05:00 [INF] Date Time the request came: 06/15/2021 17:37:27
2021-06-15 17:37:27.442 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:37:27.442 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 17:37:27.454 -05:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register() on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:37:27.459 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:37:27.468 -05:00 [INF] Executing ViewResult, running view Register.
2021-06-15 17:37:27.566 -05:00 [INF] Executed ViewResult - view Register executed in 104.3447ms.
2021-06-15 17:37:27.567 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC) in 112.3461ms
2021-06-15 17:37:27.567 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 17:37:27.567 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Register - - - 200 - text/html;+charset=utf-8 129.4324ms
2021-06-15 17:38:06.799 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/Register application/x-www-form-urlencoded 289
2021-06-15 17:38:06.802 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:38:06.802 -05:00 [INF] Date Time the request came: 06/15/2021 17:38:06
2021-06-15 17:38:06.802 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:38:06.803 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 17:38:06.820 -05:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(ApplicationCore.Models.Request.UserRegisterRequestModel) on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:38:06.824 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:38:06.898 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='300']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[HashedPassword], [u].[IsLocked], [u].[LastLoginDateTime], [u].[LastName], [u].[LockoutEndDate], [u].[PhoneNumber], [u].[Salt], [u].[TwoFactorEnabled]
FROM [User] AS [u]
WHERE [u].[Email] = @__email_0
2021-06-15 17:38:07.156 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 128), @p4='?' (Size = 1024), @p5='?', @p6='?' (DbType = DateTime2), @p7='?' (Size = 128), @p8='?' (DbType = DateTime2), @p9='?' (Size = 16), @p10='?' (Size = 1024), @p11='?'], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [User] ([AccessFailedCount], [DateOfBirth], [Email], [FirstName], [HashedPassword], [IsLocked], [LastLoginDateTime], [LastName], [LockoutEndDate], [PhoneNumber], [Salt], [TwoFactorEnabled])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [Id]
FROM [User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 17:38:07.229 -05:00 [INF] Executing ViewResult, running view Register.
2021-06-15 17:38:07.241 -05:00 [INF] Executed ViewResult - view Register executed in 11.4391ms.
2021-06-15 17:38:07.242 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC) in 421.5785ms
2021-06-15 17:38:07.242 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Register (MovieShopApp.MVC)'
2021-06-15 17:38:07.242 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/Account/Register application/x-www-form-urlencoded 289 - 200 - text/html;+charset=utf-8 443.8365ms
2021-06-15 17:38:11.548 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Login - -
2021-06-15 17:38:11.552 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:38:11.553 -05:00 [INF] Date Time the request came: 06/15/2021 17:38:11
2021-06-15 17:38:11.553 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:38:11.553 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:38:11.556 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login() on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:38:11.567 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:38:11.571 -05:00 [INF] Executing ViewResult, running view Login.
2021-06-15 17:38:11.594 -05:00 [INF] Executed ViewResult - view Login executed in 22.6918ms.
2021-06-15 17:38:11.595 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 38.5309ms
2021-06-15 17:38:11.595 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:38:11.598 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Login - - - 200 - text/html;+charset=utf-8 49.3366ms
2021-06-15 17:38:18.116 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235
2021-06-15 17:38:18.117 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:38:18.117 -05:00 [INF] Date Time the request came: 06/15/2021 17:38:18
2021-06-15 17:38:18.118 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:38:18.118 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:38:18.119 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ApplicationCore.Models.Request.LoginRequestModel) on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 17:38:18.125 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:38:18.197 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='300']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[HashedPassword], [u].[IsLocked], [u].[LastLoginDateTime], [u].[LastName], [u].[LockoutEndDate], [u].[PhoneNumber], [u].[Salt], [u].[TwoFactorEnabled]
FROM [User] AS [u]
WHERE [u].[Email] = @__email_0
2021-06-15 17:38:18.277 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 128), @p4='?' (Size = 1024), @p5='?', @p6='?' (DbType = DateTime2), @p7='?' (Size = 128), @p8='?' (DbType = DateTime2), @p9='?' (Size = 16), @p10='?' (Size = 1024), @p11='?'], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
UPDATE [User] SET [AccessFailedCount] = @p0, [DateOfBirth] = @p1, [Email] = @p2, [FirstName] = @p3, [HashedPassword] = @p4, [IsLocked] = @p5, [LastLoginDateTime] = @p6, [LastName] = @p7, [LockoutEndDate] = @p8, [PhoneNumber] = @p9, [Salt] = @p10, [TwoFactorEnabled] = @p11
WHERE [Id] = @p12;
SELECT @@ROWCOUNT;
2021-06-15 17:38:18.312 -05:00 [INF] AuthenticationScheme: Cookies signed in.
2021-06-15 17:38:18.314 -05:00 [INF] Executing LocalRedirectResult, redirecting to /.
2021-06-15 17:38:18.314 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 195.1312ms
2021-06-15 17:38:18.314 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 17:38:18.315 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235 - 302 0 - 200.7710ms
2021-06-15 17:38:18.319 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 17:38:18.328 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:38:18.328 -05:00 [INF] Date Time the request came: 06/15/2021 17:38:18
2021-06-15 17:38:18.328 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:38:18.330 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 17:38:18.330 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 17:38:18.330 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:38:18.330 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 17:38:18.330 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 17:38:18.332 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:38:18.401 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 17:38:18.409 -05:00 [INF] Executed ViewResult - view Index executed in 78.4678ms.
2021-06-15 17:38:18.409 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 78.8432ms
2021-06-15 17:38:18.409 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 17:38:18.409 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 89.9219ms
2021-06-15 17:43:45.857 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 17:43:45.887 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:43:45.887 -05:00 [INF] Date Time the request came: 06/15/2021 17:43:45
2021-06-15 17:43:45.887 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:43:45.888 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 17:43:45.888 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 17:43:45.888 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 17:43:45.890 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 17:43:45.899 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:43:45.999 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 17:43:46.414 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 17:43:46.448 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 17:43:46.454 -05:00 [INF] Executed ViewResult - view Index executed in 40.0477ms.
2021-06-15 17:43:46.455 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 564.5294ms
2021-06-15 17:43:46.455 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 17:43:46.457 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 601.7554ms
2021-06-15 17:43:47.304 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - -
2021-06-15 17:43:47.312 -05:00 [INF] Inside the Logger Middleware
2021-06-15 17:43:47.313 -05:00 [INF] Date Time the request came: 06/15/2021 17:43:47
2021-06-15 17:43:47.313 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 17:43:47.313 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 17:43:47.313 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 17:43:47.313 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 17:43:47.336 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 17:43:47.339 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 17:43:47.520 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 17:43:47.683 -05:00 [INF] Executed DbCommand (102ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 17:43:47.789 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 17:43:47.850 -05:00 [INF] Executed DbCommand (39ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 17:43:47.870 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 17:43:47.877 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 540.6155ms
2021-06-15 17:43:47.877 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 17:43:47.879 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Average[TSource](IEnumerable`1 source, Func`2 selector)
   at Infrastructure.Repositories.ReviewRepository.GetAvgReviewRatingByMovie(Int32 movieId) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/ReviewRepository.cs:line 32
   at Infrastructure.Services.MovieService.GetMovieDetailsById(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 53
   at MovieShopApp.MVC.Controllers.MovieController.Details(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 29
   at lambda_method373(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 17:43:47.981 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - - - 500 - text/html;+charset=utf-8 676.3148ms
2021-06-15 18:53:08.095 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 18:53:08.626 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 18:53:08.629 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 18:53:08.632 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 18:53:08.632 -05:00 [INF] Hosting environment: Development
2021-06-15 18:53:08.632 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 18:53:09.422 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 18:53:09.599 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:53:09.604 -05:00 [INF] Date Time the request came: 06/15/2021 18:53:09
2021-06-15 18:53:09.604 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:53:09.607 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:53:09.607 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:53:09.608 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:53:09.690 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 18:53:09.771 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:53:11.701 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:53:12.724 -05:00 [INF] Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:53:12.943 -05:00 [INF] Executed ViewResult - view Index executed in 3196.1073ms.
2021-06-15 18:53:12.951 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 3257.4889ms
2021-06-15 18:53:12.953 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:53:12.961 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 18:53:12.961 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 18:53:12.961 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 18:53:12.961 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 18:53:12.961 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 18:53:12.997 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 3574.5980ms
2021-06-15 18:53:12.999 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 18:53:12.999 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 18:53:12.999 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 18:53:12.999 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 18:53:12.999 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 18:53:13.006 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 45.6123ms
2021-06-15 18:53:13.006 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 44.4817ms
2021-06-15 18:53:13.006 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 45.0336ms
2021-06-15 18:53:13.006 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 45.0990ms
2021-06-15 18:53:13.006 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 45.0444ms
2021-06-15 18:53:13.010 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 18:53:13.012 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 18:53:13.012 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 2.0135ms
2021-06-15 18:53:14.719 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 18:53:14.757 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:53:14.759 -05:00 [INF] Date Time the request came: 06/15/2021 18:53:14
2021-06-15 18:53:14.759 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:53:14.760 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:53:14.760 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:53:14.760 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:53:14.793 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:53:14.817 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:53:15.021 -05:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 18:53:15.863 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:53:15.920 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:53:15.928 -05:00 [INF] Executed ViewResult - view Index executed in 70.6603ms.
2021-06-15 18:53:15.931 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1137.2261ms
2021-06-15 18:53:15.932 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:53:15.944 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1231.5511ms
2021-06-15 18:53:16.932 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - -
2021-06-15 18:53:16.941 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:53:16.941 -05:00 [INF] Date Time the request came: 06/15/2021 18:53:16
2021-06-15 18:53:16.941 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:53:16.941 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:53:16.941 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:53:16.942 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:53:16.960 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:53:16.989 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:53:17.171 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 18:53:17.250 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:53:17.359 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:53:17.378 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:53:17.398 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:53:17.406 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 445.2162ms
2021-06-15 18:53:17.406 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:53:17.408 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Average[TSource](IEnumerable`1 source, Func`2 selector)
   at Infrastructure.Repositories.ReviewRepository.GetAvgReviewRatingByMovie(Int32 movieId) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Repositories/ReviewRepository.cs:line 32
   at Infrastructure.Services.MovieService.GetMovieDetailsById(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/MovieService.cs:line 53
   at MovieShopApp.MVC.Controllers.MovieController.Details(Int32 id) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/MovieController.cs:line 29
   at lambda_method187(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 18:53:17.507 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - - - 500 - text/html;+charset=utf-8 575.2737ms
2021-06-15 18:55:23.779 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - -
2021-06-15 18:55:23.825 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:55:23.827 -05:00 [INF] Date Time the request came: 06/15/2021 18:55:23
2021-06-15 18:55:23.827 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:55:23.828 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:55:23.828 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:55:23.828 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:55:23.833 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:55:23.868 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:55:23.929 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:55:23.948 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:23.954 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:23.975 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:55:24.048 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:55:24.104 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:55:24.112 -05:00 [INF] Executed ViewResult - view Details executed in 67.4013ms.
2021-06-15 18:55:24.113 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 279.4181ms
2021-06-15 18:55:24.113 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:55:24.114 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - - - 200 - text/html;+charset=utf-8 338.4909ms
2021-06-15 18:55:24.150 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 18:55:24.210 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 18:55:24.212 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 18:55:24.308 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 18:55:24.308 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 18:55:24.308 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 18:55:24.310 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 96.0996ms
2021-06-15 18:55:24.310 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 98.8826ms
2021-06-15 18:55:24.310 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 158.4535ms
2021-06-15 18:55:41.881 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - -
2021-06-15 18:55:41.920 -05:00 [INF] Authorization was successful.
2021-06-15 18:55:41.922 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:55:41.922 -05:00 [INF] Date Time the request came: 06/15/2021 18:55:41
2021-06-15 18:55:41.922 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:55:41.922 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:55:41.922 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:55:41.923 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:55:41.942 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:55:41.949 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:55:42.579 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:55:42.604 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:42.611 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:42.625 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:55:42.802 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:55:43.061 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:55:43.066 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 266.9717ms.
2021-06-15 18:55:43.067 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 1125.5677ms
2021-06-15 18:55:43.068 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:55:43.071 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - - - 200 - text/html;+charset=utf-8 1191.2885ms
2021-06-15 18:55:55.661 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/6 application/x-www-form-urlencoded 274
2021-06-15 18:55:55.692 -05:00 [INF] Authorization was successful.
2021-06-15 18:55:55.694 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:55:55.695 -05:00 [INF] Date Time the request came: 06/15/2021 18:55:55
2021-06-15 18:55:55.695 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:55:55.696 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:55:55.696 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:55:55.697 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:55:55.740 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:55:55.770 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:55:56.045 -05:00 [INF] Executed DbCommand (37ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 18:55:56.081 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:55:56.097 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:56.102 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:55:56.107 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:55:56.506 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 18:55:56.612 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 18:55:56.617 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 874.8792ms
2021-06-15 18:55:56.618 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:55:56.628 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/6 application/x-www-form-urlencoded 274 - 200 0 - 968.6667ms
2021-06-15 18:56:01.204 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - -
2021-06-15 18:56:01.221 -05:00 [INF] Authorization was successful.
2021-06-15 18:56:01.223 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:01.223 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:01
2021-06-15 18:56:01.223 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:01.223 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:01.223 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:01.223 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:01.226 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:56:01.235 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:01.265 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:56:01.277 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:01.286 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:01.296 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:56:01.360 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:56:01.420 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:01.442 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 81.2561ms.
2021-06-15 18:56:01.445 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 218.8355ms
2021-06-15 18:56:01.446 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:01.451 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - - - 200 - text/html;+charset=utf-8 247.0340ms
2021-06-15 18:56:07.959 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 18:56:07.967 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:07.968 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:07
2021-06-15 18:56:07.968 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:07.968 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:07.968 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:07.969 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:56:07.975 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 18:56:07.978 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:56:07.988 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:08.001 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:08.007 -05:00 [INF] Executed ViewResult - view Index executed in 29.1419ms.
2021-06-15 18:56:08.008 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 33.2691ms
2021-06-15 18:56:08.009 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:56:08.013 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 54.8310ms
2021-06-15 18:56:10.600 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 18:56:10.603 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:10.603 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:10
2021-06-15 18:56:10.603 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:10.603 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:10.603 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:10.603 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:56:10.604 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:56:10.607 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:10.618 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 18:56:11.490 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:56:11.508 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:11.515 -05:00 [INF] Executed ViewResult - view Index executed in 24.9615ms.
2021-06-15 18:56:11.516 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 911.3369ms
2021-06-15 18:56:11.516 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:56:11.523 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 919.6904ms
2021-06-15 18:56:13.224 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - -
2021-06-15 18:56:13.228 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:13.228 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:13
2021-06-15 18:56:13.228 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:13.228 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:13.228 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:13.228 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:56:13.229 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:56:13.233 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:13.247 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:56:13.255 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:13.259 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:13.267 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:56:13.271 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:56:13.295 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:13.299 -05:00 [INF] Executed ViewResult - view Details executed in 28.6004ms.
2021-06-15 18:56:13.300 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 71.0752ms
2021-06-15 18:56:13.300 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:56:13.301 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - - - 200 - text/html;+charset=utf-8 77.8842ms
2021-06-15 18:56:15.056 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - -
2021-06-15 18:56:15.061 -05:00 [INF] Authorization was successful.
2021-06-15 18:56:15.062 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:15.062 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:15
2021-06-15 18:56:15.062 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:15.062 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:15.062 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:15.063 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:15.063 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:56:15.065 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:15.077 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:56:15.097 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:15.112 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:15.123 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:56:15.128 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:56:15.154 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:15.158 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 30.2722ms.
2021-06-15 18:56:15.158 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 95.2382ms
2021-06-15 18:56:15.158 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:15.160 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - - - 200 - text/html;+charset=utf-8 103.2937ms
2021-06-15 18:56:45.597 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/6 application/x-www-form-urlencoded 274
2021-06-15 18:56:45.614 -05:00 [INF] Authorization was successful.
2021-06-15 18:56:45.615 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:45.621 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:45
2021-06-15 18:56:45.621 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:45.621 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:45.621 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:45.621 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:45.629 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:56:45.651 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:45.742 -05:00 [INF] Executed DbCommand (52ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 18:56:45.764 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 134.5764ms
2021-06-15 18:56:45.765 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:45.765 -05:00 [ERR] An unhandled exception has occurred while executing the request.
ApplicationCore.Exceptions.ConflictException: Movie already Purchased
   at Infrastructure.Services.UserService.PurchaseMovie(PurchaseRequestModel purchaseRequest) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/UserService.cs:line 145
   at MovieShopApp.MVC.Controllers.UserController.PurchaseMovie(PurchaseRequestModel purchaseRequestModel) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 18:56:46.244 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/6 application/x-www-form-urlencoded 274 - 500 - text/html;+charset=utf-8 636.9352ms
2021-06-15 18:56:52.336 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - -
2021-06-15 18:56:52.344 -05:00 [INF] Authorization was successful.
2021-06-15 18:56:52.344 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:56:52.345 -05:00 [INF] Date Time the request came: 06/15/2021 18:56:52
2021-06-15 18:56:52.345 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:56:52.345 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:56:52.345 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:56:52.345 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:52.346 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:56:52.350 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:56:52.363 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:56:52.377 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:52.385 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:56:52.397 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:56:52.407 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:56:52.432 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:56:52.438 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 30.7702ms.
2021-06-15 18:56:52.439 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 92.4996ms
2021-06-15 18:56:52.440 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:56:52.442 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/6 - - - 200 - text/html;+charset=utf-8 105.9373ms
2021-06-15 18:57:41.344 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 18:57:41.359 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:57:41.361 -05:00 [INF] Date Time the request came: 06/15/2021 18:57:41
2021-06-15 18:57:41.361 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:57:41.361 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:57:41.361 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:57:41.361 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:57:41.363 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 18:57:41.364 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:57:41.377 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:57:41.393 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:57:41.402 -05:00 [INF] Executed ViewResult - view Index executed in 38.0036ms.
2021-06-15 18:57:41.403 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 40.3331ms
2021-06-15 18:57:41.403 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:57:41.405 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 60.5103ms
2021-06-15 18:57:42.830 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 18:57:42.836 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:57:42.837 -05:00 [INF] Date Time the request came: 06/15/2021 18:57:42
2021-06-15 18:57:42.837 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:57:42.838 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:57:42.838 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:57:42.838 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:57:42.840 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:57:42.843 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:57:42.863 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 18:57:43.377 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:57:43.387 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:57:43.389 -05:00 [INF] Executed ViewResult - view Index executed in 12.02ms.
2021-06-15 18:57:43.391 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 549.8975ms
2021-06-15 18:57:43.391 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:57:43.393 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 564.5686ms
2021-06-15 18:57:44.279 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/16 - -
2021-06-15 18:57:44.282 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:57:44.282 -05:00 [INF] Date Time the request came: 06/15/2021 18:57:44
2021-06-15 18:57:44.282 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:57:44.282 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:57:44.282 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:57:44.282 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:57:44.282 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:57:44.285 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:57:44.293 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:57:44.300 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:44.315 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:44.322 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:57:44.325 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:57:44.331 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:57:44.334 -05:00 [INF] Executed ViewResult - view Details executed in 9.0665ms.
2021-06-15 18:57:44.334 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 51.1748ms
2021-06-15 18:57:44.334 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:57:44.334 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/16 - - - 200 - text/html;+charset=utf-8 55.6939ms
2021-06-15 18:57:45.626 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - -
2021-06-15 18:57:45.629 -05:00 [INF] Authorization was successful.
2021-06-15 18:57:45.629 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:57:45.629 -05:00 [INF] Date Time the request came: 06/15/2021 18:57:45
2021-06-15 18:57:45.629 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:57:45.629 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:57:45.629 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:57:45.629 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:57:45.629 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:57:45.632 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:57:45.639 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:57:45.652 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:45.657 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:45.661 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:57:45.663 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:57:45.675 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:57:45.678 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 15.3157ms.
2021-06-15 18:57:45.679 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 49.3984ms
2021-06-15 18:57:45.679 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:57:45.680 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - - - 200 - text/html;+charset=utf-8 53.5838ms
2021-06-15 18:57:46.507 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/16 application/x-www-form-urlencoded 276
2021-06-15 18:57:46.510 -05:00 [INF] Authorization was successful.
2021-06-15 18:57:46.510 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:57:46.510 -05:00 [INF] Date Time the request came: 06/15/2021 18:57:46
2021-06-15 18:57:46.510 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:57:46.510 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:57:46.510 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:57:46.510 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:57:46.511 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:57:46.513 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:57:46.523 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 18:57:46.526 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:57:46.531 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:46.534 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:57:46.538 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:57:46.575 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 18:57:46.588 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 18:57:46.588 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 76.8905ms
2021-06-15 18:57:46.588 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:57:46.589 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/16 application/x-www-form-urlencoded 276 - 200 0 - 81.9205ms
2021-06-15 18:58:04.482 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - -
2021-06-15 18:58:04.501 -05:00 [INF] Authorization was successful.
2021-06-15 18:58:04.501 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:04.501 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:04
2021-06-15 18:58:04.501 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:04.501 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:04.501 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:04.502 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:04.502 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:58:04.505 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:04.537 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:04.545 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:04.551 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:04.557 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:04.561 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:58:04.592 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:04.598 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 38.5758ms.
2021-06-15 18:58:04.599 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 96.3921ms
2021-06-15 18:58:04.599 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:04.609 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - - - 200 - text/html;+charset=utf-8 128.6457ms
2021-06-15 18:58:22.392 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - -
2021-06-15 18:58:22.418 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:22.418 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:22
2021-06-15 18:58:22.418 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:22.419 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:22.419 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:22.419 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:22.420 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:58:22.430 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:22.457 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:22.463 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:22.472 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:22.477 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:22.480 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:58:22.508 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:22.511 -05:00 [INF] Executed ViewResult - view Details executed in 30.2696ms.
2021-06-15 18:58:22.512 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 91.2456ms
2021-06-15 18:58:22.512 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:22.513 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - - - 200 - text/html;+charset=utf-8 121.4960ms
2021-06-15 18:58:23.622 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - -
2021-06-15 18:58:23.627 -05:00 [INF] Authorization was successful.
2021-06-15 18:58:23.635 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:23.635 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:23
2021-06-15 18:58:23.635 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:23.635 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:23.635 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:23.635 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:23.635 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:58:23.636 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:23.643 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:23.648 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:23.651 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:23.654 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:23.657 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:58:23.686 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:23.689 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 32.1311ms.
2021-06-15 18:58:23.691 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 55.0521ms
2021-06-15 18:58:23.691 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:23.692 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - - - 200 - text/html;+charset=utf-8 69.7674ms
2021-06-15 18:58:24.903 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/327 application/x-www-form-urlencoded 278
2021-06-15 18:58:24.905 -05:00 [INF] Authorization was successful.
2021-06-15 18:58:24.905 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:24.905 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:24
2021-06-15 18:58:24.905 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:24.905 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:24.905 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:24.905 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:24.906 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:58:24.907 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:24.916 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 18:58:24.921 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:24.928 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:24.934 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:24.938 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:24.955 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 18:58:24.970 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 18:58:24.970 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 64.3613ms
2021-06-15 18:58:24.971 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:24.971 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/327 application/x-www-form-urlencoded 278 - 200 0 - 68.2874ms
2021-06-15 18:58:41.621 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 18:58:42.755 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 18:58:42.827 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 18:58:42.830 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 18:58:42.831 -05:00 [INF] Hosting environment: Development
2021-06-15 18:58:42.831 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 18:58:44.322 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 18:58:44.541 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:44.547 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:44
2021-06-15 18:58:44.547 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:44.554 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:44.554 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:44.556 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:58:44.775 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 18:58:45.001 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:58:46.758 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:47.744 -05:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:48.015 -05:00 [INF] Executed ViewResult - view Index executed in 3052.0229ms.
2021-06-15 18:58:48.046 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 3250.4761ms
2021-06-15 18:58:48.047 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 18:58:48.105 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 3785.2407ms
2021-06-15 18:58:49.318 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 18:58:49.333 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:49.334 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:49
2021-06-15 18:58:49.334 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:49.334 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:49.334 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:49.335 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:58:49.355 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:58:49.372 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:49.568 -05:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 18:58:51.332 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 18:58:51.381 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:51.389 -05:00 [INF] Executed ViewResult - view Index executed in 58.509ms.
2021-06-15 18:58:51.391 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 2036.0427ms
2021-06-15 18:58:51.392 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 18:58:51.398 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 2080.6970ms
2021-06-15 18:58:52.371 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - -
2021-06-15 18:58:52.387 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:52.388 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:52
2021-06-15 18:58:52.388 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:52.388 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:52.388 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:52.389 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:52.426 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:58:52.448 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:52.601 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 18:58:52.823 -05:00 [INF] Executed DbCommand (122ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:53.049 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:53.077 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:53.099 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:53.128 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:58:53.153 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:53.155 -05:00 [INF] Executed ViewResult - view Details executed in 28.1248ms.
2021-06-15 18:58:53.155 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 729.0067ms
2021-06-15 18:58:53.156 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:53.157 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/6 - - - 200 - text/html;+charset=utf-8 786.8291ms
2021-06-15 18:58:57.353 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/29 - -
2021-06-15 18:58:57.358 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:57.359 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:57
2021-06-15 18:58:57.359 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:57.359 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:57.360 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:57.360 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:57.363 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 18:58:57.384 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:57.403 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:57.416 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:57.422 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:57.428 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:58:57.435 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 18:58:57.443 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:58:57.444 -05:00 [INF] Executed ViewResult - view Details executed in 8.5005ms.
2021-06-15 18:58:57.444 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 80.6774ms
2021-06-15 18:58:57.444 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 18:58:57.444 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/29 - - - 200 - text/html;+charset=utf-8 92.8712ms
2021-06-15 18:58:58.785 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/29 - -
2021-06-15 18:58:58.805 -05:00 [INF] Authorization was successful.
2021-06-15 18:58:58.806 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:58:58.807 -05:00 [INF] Date Time the request came: 06/15/2021 18:58:58
2021-06-15 18:58:58.807 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:58:58.807 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:58:58.807 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:58:58.807 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:58:58.813 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:58:58.815 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:58:59.227 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:58:59.255 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:59.259 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:58:59.264 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:59:06.502 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 18:59:06.774 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 18:59:06.777 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 297.3952ms.
2021-06-15 18:59:06.777 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 7964.2765ms
2021-06-15 18:59:06.777 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:59:06.779 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/29 - - - 200 - text/html;+charset=utf-8 7993.2517ms
2021-06-15 18:59:09.485 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/29 application/x-www-form-urlencoded 276
2021-06-15 18:59:09.492 -05:00 [INF] Authorization was successful.
2021-06-15 18:59:09.493 -05:00 [INF] Inside the Logger Middleware
2021-06-15 18:59:09.493 -05:00 [INF] Date Time the request came: 06/15/2021 18:59:09
2021-06-15 18:59:09.493 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 18:59:09.493 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 18:59:09.493 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 18:59:09.493 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:59:09.511 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 18:59:09.514 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 18:59:13.821 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 18:59:13.837 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 18:59:13.845 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:59:13.849 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 18:59:13.854 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 18:59:14.171 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 18:59:14.254 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 18:59:14.255 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 4742.873ms
2021-06-15 18:59:14.255 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 18:59:14.259 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/29 application/x-www-form-urlencoded 276 - 200 0 - 4775.6022ms
2021-06-15 19:00:16.589 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:00:16.598 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:00:16.599 -05:00 [INF] Date Time the request came: 06/15/2021 19:00:16
2021-06-15 19:00:16.599 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:00:16.599 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:00:16.599 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:00:16.599 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:00:16.600 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:00:16.608 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:00:16.623 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:00:16.656 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:00:16.658 -05:00 [INF] Executed ViewResult - view Index executed in 56.8819ms.
2021-06-15 19:00:16.658 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 58.2635ms
2021-06-15 19:00:16.658 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:00:16.659 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 70.8135ms
2021-06-15 19:15:14.077 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/29 - -
2021-06-15 19:15:14.094 -05:00 [INF] Authorization was successful.
2021-06-15 19:15:14.094 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:15:14.094 -05:00 [INF] Date Time the request came: 06/15/2021 19:15:14
2021-06-15 19:15:14.095 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:15:14.095 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:15:14.095 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:15:14.095 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:15:14.096 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:15:14.110 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:15:14.766 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:15:14.777 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:15:14.780 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:15:14.783 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:38:50.848 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:38:50.956 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:38:50.958 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 169.443ms.
2021-06-15 19:38:50.959 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 1416849.2655ms
2021-06-15 19:38:50.959 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:38:50.961 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/29 - - - 200 - text/html;+charset=utf-8 1416873.0276ms
2021-06-15 19:41:39.874 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:41:39.879 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:41:39.879 -05:00 [INF] Date Time the request came: 06/15/2021 19:41:39
2021-06-15 19:41:39.879 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:41:39.880 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:41:39.880 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:41:39.880 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:41:39.880 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:41:39.886 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:41:39.910 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:41:41.311 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:41:41.331 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:41:41.333 -05:00 [INF] Executed ViewResult - view Index executed in 24.733ms.
2021-06-15 19:41:41.333 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1452.572ms
2021-06-15 19:41:41.333 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:41:41.334 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1459.8875ms
2021-06-15 19:41:41.347 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:41:42.028 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:41:42.027 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:41:42.495 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 19:41:42.495 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 19:41:42.500 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 19:41:42.526 -05:00 [INF] The file /css/site.css was not modified
2021-06-15 19:41:42.526 -05:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2021-06-15 19:41:42.526 -05:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2021-06-15 19:41:42.526 -05:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2021-06-15 19:41:42.526 -05:00 [INF] The file /js/site.js was not modified
2021-06-15 19:41:42.526 -05:00 [INF] The file /lib/font-awesome/css/all.min.css was not modified
2021-06-15 19:41:42.538 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 304 - text/css 558.4536ms
2021-06-15 19:41:42.538 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 304 - text/css 1189.3048ms
2021-06-15 19:41:42.538 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 304 - application/javascript 38.6260ms
2021-06-15 19:41:42.538 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 304 - application/javascript 38.4320ms
2021-06-15 19:41:42.538 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 304 - text/css 555.2880ms
2021-06-15 19:41:42.562 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 304 - application/javascript 68.5343ms
2021-06-15 19:41:49.040 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:41:49.043 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:41:49.043 -05:00 [INF] Date Time the request came: 06/15/2021 19:41:49
2021-06-15 19:41:49.043 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:41:49.043 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:41:49.044 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:41:49.044 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:41:49.044 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:41:49.049 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:41:49.105 -05:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:41:50.412 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:41:50.421 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:41:50.422 -05:00 [INF] Executed ViewResult - view Index executed in 9.9982ms.
2021-06-15 19:41:50.423 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1378.304ms
2021-06-15 19:41:50.423 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:41:50.423 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1383.0824ms
2021-06-15 19:41:50.992 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/16 - -
2021-06-15 19:41:50.994 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:41:50.994 -05:00 [INF] Date Time the request came: 06/15/2021 19:41:50
2021-06-15 19:41:50.994 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:41:50.994 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:41:50.994 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:41:50.994 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:41:50.994 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:41:50.995 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:41:51.005 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:41:51.011 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:41:51.016 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:41:51.021 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:41:51.026 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:41:51.033 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:41:51.033 -05:00 [INF] Executed ViewResult - view Details executed in 8.4375ms.
2021-06-15 19:41:51.034 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 39.5193ms
2021-06-15 19:41:51.035 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:41:51.036 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/16 - - - 200 - text/html;+charset=utf-8 43.3821ms
2021-06-15 19:41:51.047 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 19:41:51.047 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 19:41:51.047 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 19:41:51.055 -05:00 [INF] The file /lib/font-awesome/webfonts/fa-regular-400.woff2 was not modified
2021-06-15 19:41:51.055 -05:00 [INF] The file /lib/font-awesome/webfonts/fa-brands-400.woff2 was not modified
2021-06-15 19:41:51.055 -05:00 [INF] The file /lib/font-awesome/webfonts/fa-solid-900.woff2 was not modified
2021-06-15 19:41:51.056 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 304 - font/woff2 8.9891ms
2021-06-15 19:41:51.056 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 304 - font/woff2 9.0934ms
2021-06-15 19:41:51.056 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 304 - font/woff2 9.1290ms
2021-06-15 19:41:52.967 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - -
2021-06-15 19:41:52.970 -05:00 [INF] Authorization was successful.
2021-06-15 19:41:52.970 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:41:52.970 -05:00 [INF] Date Time the request came: 06/15/2021 19:41:52
2021-06-15 19:41:52.970 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:41:52.971 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:41:52.971 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:41:52.971 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:41:52.971 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:41:52.973 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:41:52.981 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:41:52.988 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:41:52.991 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:41:52.995 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:03.709 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:42:03.761 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:03.763 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 55.3515ms.
2021-06-15 19:42:03.763 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 10792.0355ms
2021-06-15 19:42:03.763 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:03.768 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - - - 200 - text/html;+charset=utf-8 10801.1964ms
2021-06-15 19:42:27.185 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/16 application/x-www-form-urlencoded 276
2021-06-15 19:42:27.197 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:27.198 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:27.198 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:27
2021-06-15 19:42:27.198 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:27.198 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:27.198 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:27.198 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:27.199 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:27.204 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:27.242 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:42:27.355 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 156.2991ms
2021-06-15 19:42:27.356 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:27.361 -05:00 [ERR] An unhandled exception has occurred while executing the request.
ApplicationCore.Exceptions.ConflictException: Movie already Purchased
   at Infrastructure.Services.UserService.PurchaseMovie(PurchaseRequestModel purchaseRequest) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/UserService.cs:line 145
   at MovieShopApp.MVC.Controllers.UserController.PurchaseMovie(PurchaseRequestModel purchaseRequestModel) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 19:42:27.646 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/16 application/x-www-form-urlencoded 276 - 500 - text/html;+charset=utf-8 440.1243ms
2021-06-15 19:42:28.856 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - -
2021-06-15 19:42:28.863 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:28.863 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:28.863 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:28
2021-06-15 19:42:28.863 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:28.863 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:28.864 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:28.864 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:28.865 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:28.868 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:28.883 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:28.893 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:28.898 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:28.907 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:28.937 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:42:28.946 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:28.952 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 14.6784ms.
2021-06-15 19:42:28.953 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 87.146ms
2021-06-15 19:42:28.954 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:28.954 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/16 - - - 200 - text/html;+charset=utf-8 99.1807ms
2021-06-15 19:42:31.083 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/47 - -
2021-06-15 19:42:31.084 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:31.084 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:31
2021-06-15 19:42:31.084 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:31.084 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:31.084 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:31.084 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:42:31.085 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:42:31.086 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:31.100 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:31.114 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:31.122 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:31.128 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:31.139 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:42:31.146 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:31.147 -05:00 [INF] Executed ViewResult - view Details executed in 8.683ms.
2021-06-15 19:42:31.148 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 62.7158ms
2021-06-15 19:42:31.148 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:42:31.148 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/47 - - - 200 - text/html;+charset=utf-8 65.6943ms
2021-06-15 19:42:32.232 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - -
2021-06-15 19:42:32.232 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:32.233 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:32.233 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:32
2021-06-15 19:42:32.233 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:32.233 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:32.233 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:32.233 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:32.233 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:32.233 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:32.239 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:32.243 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:32.249 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:32.252 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:32.255 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:42:32.260 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:32.260 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 5.0171ms.
2021-06-15 19:42:32.260 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 27.2609ms
2021-06-15 19:42:32.260 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:32.260 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - - - 200 - text/html;+charset=utf-8 28.4712ms
2021-06-15 19:42:33.195 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/47 application/x-www-form-urlencoded 276
2021-06-15 19:42:33.196 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:33.196 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:33.196 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:33
2021-06-15 19:42:33.196 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:33.196 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:33.196 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:33.196 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:33.196 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:33.196 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:33.201 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:42:33.205 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:33.209 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:33.212 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:33.216 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:33.250 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:42:33.267 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 19:42:33.267 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 71.4612ms
2021-06-15 19:42:33.267 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:33.268 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/47 application/x-www-form-urlencoded 276 - 200 0 - 73.1290ms
2021-06-15 19:42:54.144 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - -
2021-06-15 19:42:54.152 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:54.152 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:54.152 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:54
2021-06-15 19:42:54.152 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:54.152 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:54.152 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:54.153 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:54.158 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:54.164 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:54.202 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:54.208 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:54.211 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:54.216 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:54.248 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:42:54.256 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:54.258 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 9.5218ms.
2021-06-15 19:42:54.258 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 100.7187ms
2021-06-15 19:42:54.259 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:54.259 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - - - 200 - text/html;+charset=utf-8 116.3048ms
2021-06-15 19:42:55.566 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/47 application/x-www-form-urlencoded 276
2021-06-15 19:42:55.567 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:55.567 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:55.567 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:55
2021-06-15 19:42:55.567 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:55.567 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:55.567 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:55.567 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:55.568 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:55.569 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:55.575 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:42:55.645 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 76.73ms
2021-06-15 19:42:55.649 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:55.649 -05:00 [ERR] An unhandled exception has occurred while executing the request.
ApplicationCore.Exceptions.ConflictException: Movie already Purchased
   at Infrastructure.Services.UserService.PurchaseMovie(PurchaseRequestModel purchaseRequest) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/UserService.cs:line 145
   at MovieShopApp.MVC.Controllers.UserController.PurchaseMovie(PurchaseRequestModel purchaseRequestModel) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 19:42:55.666 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/47 application/x-www-form-urlencoded 276 - 500 - text/html;+charset=utf-8 99.5414ms
2021-06-15 19:42:58.642 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - -
2021-06-15 19:42:58.645 -05:00 [INF] Authorization was successful.
2021-06-15 19:42:58.645 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:42:58.645 -05:00 [INF] Date Time the request came: 06/15/2021 19:42:58
2021-06-15 19:42:58.645 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:42:58.645 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:42:58.645 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:42:58.645 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:58.646 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:42:58.648 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:42:58.657 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:42:58.665 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:58.670 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:42:58.675 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:42:58.681 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:42:58.688 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:42:58.689 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 7.8872ms.
2021-06-15 19:42:58.690 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 44.1122ms
2021-06-15 19:42:58.690 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:42:58.691 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/47 - - - 200 - text/html;+charset=utf-8 48.7166ms
2021-06-15 19:43:02.269 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - -
2021-06-15 19:43:02.270 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:02.270 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:02
2021-06-15 19:43:02.271 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:02.271 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:02.271 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:02.271 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:43:02.272 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:43:02.274 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:02.332 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:02.340 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:02.343 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:02.348 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:02.352 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:43:02.357 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:43:02.357 -05:00 [INF] Executed ViewResult - view Details executed in 5.2947ms.
2021-06-15 19:43:02.358 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 85.6233ms
2021-06-15 19:43:02.358 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:43:02.358 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - - - 200 - text/html;+charset=utf-8 91.3632ms
2021-06-15 19:43:04.103 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - -
2021-06-15 19:43:04.104 -05:00 [INF] Authorization was successful.
2021-06-15 19:43:04.104 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:04.104 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:04
2021-06-15 19:43:04.104 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:04.104 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:04.104 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:04.104 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:04.105 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:43:04.106 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:04.112 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:04.118 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:04.122 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:04.126 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:04.130 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:43:04.136 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:43:04.137 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 6.4407ms.
2021-06-15 19:43:04.137 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 32.2204ms
2021-06-15 19:43:04.137 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:04.137 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - - - 200 - text/html;+charset=utf-8 34.4155ms
2021-06-15 19:43:05.173 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/327 application/x-www-form-urlencoded 278
2021-06-15 19:43:05.174 -05:00 [INF] Authorization was successful.
2021-06-15 19:43:05.174 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:05.174 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:05
2021-06-15 19:43:05.174 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:05.174 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:05.174 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:05.174 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:05.175 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:43:05.176 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:05.182 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:43:05.246 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 70.8565ms
2021-06-15 19:43:05.246 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:05.246 -05:00 [ERR] An unhandled exception has occurred while executing the request.
ApplicationCore.Exceptions.ConflictException: Movie already Purchased
   at Infrastructure.Services.UserService.PurchaseMovie(PurchaseRequestModel purchaseRequest) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/UserService.cs:line 145
   at MovieShopApp.MVC.Controllers.UserController.PurchaseMovie(PurchaseRequestModel purchaseRequestModel) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/UserController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 19:43:05.253 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/327 application/x-www-form-urlencoded 278 - 500 - text/html;+charset=utf-8 80.5812ms
2021-06-15 19:43:07.115 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - -
2021-06-15 19:43:07.117 -05:00 [INF] Authorization was successful.
2021-06-15 19:43:07.117 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:07.117 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:07
2021-06-15 19:43:07.117 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:07.117 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:07.117 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:07.117 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:07.118 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:43:07.119 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:07.248 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:07.255 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:07.258 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:07.262 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:07.265 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:43:07.270 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:43:07.270 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 5.0825ms.
2021-06-15 19:43:07.271 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 153.0923ms
2021-06-15 19:43:07.271 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:07.271 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/327 - - - 200 - text/html;+charset=utf-8 157.5420ms
2021-06-15 19:43:09.784 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - -
2021-06-15 19:43:09.786 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:09.786 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:09
2021-06-15 19:43:09.786 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:09.786 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:09.786 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:09.786 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:43:09.786 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:43:09.788 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:09.829 -05:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:09.837 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:09.842 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:09.847 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:09.853 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:43:09.859 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:43:09.860 -05:00 [INF] Executed ViewResult - view Details executed in 6.8971ms.
2021-06-15 19:43:09.861 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 74.1572ms
2021-06-15 19:43:09.861 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:43:09.861 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - - - 200 - text/html;+charset=utf-8 77.0396ms
2021-06-15 19:43:11.246 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - -
2021-06-15 19:43:11.247 -05:00 [INF] Authorization was successful.
2021-06-15 19:43:11.247 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:11.247 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:11
2021-06-15 19:43:11.247 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:11.247 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:11.247 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:11.247 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:11.247 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:43:11.248 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:11.254 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:11.259 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:11.262 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:11.267 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:11.271 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:43:11.277 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:43:11.277 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 6.1823ms.
2021-06-15 19:43:11.278 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 30.3277ms
2021-06-15 19:43:11.278 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:11.278 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - - - 200 - text/html;+charset=utf-8 32.2624ms
2021-06-15 19:43:12.111 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/229 application/x-www-form-urlencoded 278
2021-06-15 19:43:12.112 -05:00 [INF] Authorization was successful.
2021-06-15 19:43:12.112 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:43:12.112 -05:00 [INF] Date Time the request came: 06/15/2021 19:43:12
2021-06-15 19:43:12.112 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:43:12.112 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:43:12.112 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:43:12.112 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:12.112 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:43:12.113 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:43:12.118 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:43:12.121 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:43:12.125 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:12.128 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:43:12.201 -05:00 [INF] Executed DbCommand (73ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:43:12.228 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:43:12.240 -05:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-06-15 19:43:12.240 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 128.1687ms
2021-06-15 19:43:12.240 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:43:12.241 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/229 application/x-www-form-urlencoded 278 - 200 0 - 129.7442ms
2021-06-15 19:44:55.411 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 19:44:56.438 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 19:44:56.441 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 19:44:56.444 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 19:44:56.444 -05:00 [INF] Hosting environment: Development
2021-06-15 19:44:56.444 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 19:44:58.097 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:44:58.256 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:44:58.261 -05:00 [INF] Date Time the request came: 06/15/2021 19:44:58
2021-06-15 19:44:58.261 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:44:58.263 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:44:58.263 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:44:58.264 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:44:58.371 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:44:58.440 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:44:59.734 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:00.533 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:45:00.672 -05:00 [INF] Executed ViewResult - view Index executed in 2256.9404ms.
2021-06-15 19:45:00.677 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2302.932ms
2021-06-15 19:45:00.678 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:45:00.690 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2600.9851ms
2021-06-15 19:45:04.907 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:45:04.955 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:45:04.955 -05:00 [INF] Date Time the request came: 06/15/2021 19:45:04
2021-06-15 19:45:04.955 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:45:04.956 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:45:04.956 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:45:04.956 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:45:04.974 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:45:04.992 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:05.207 -05:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:45:06.843 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:45:06.883 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:45:06.889 -05:00 [INF] Executed ViewResult - view Index executed in 48.4473ms.
2021-06-15 19:45:06.892 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1917.5402ms
2021-06-15 19:45:06.893 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:45:06.899 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1993.6114ms
2021-06-15 19:45:09.051 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/388 - -
2021-06-15 19:45:09.067 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:45:09.067 -05:00 [INF] Date Time the request came: 06/15/2021 19:45:09
2021-06-15 19:45:09.067 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:45:09.068 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:45:09.068 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:45:09.068 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:45:09.098 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:45:09.122 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:09.283 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 19:45:09.354 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:45:09.681 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:09.708 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:09.735 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:45:09.772 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:45:09.805 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:45:09.808 -05:00 [INF] Executed ViewResult - view Details executed in 36.6665ms.
2021-06-15 19:45:09.808 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 710.3006ms
2021-06-15 19:45:09.809 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:45:09.811 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/388 - - - 200 - text/html;+charset=utf-8 760.0253ms
2021-06-15 19:45:10.954 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/388 - -
2021-06-15 19:45:10.990 -05:00 [INF] Authorization was successful.
2021-06-15 19:45:10.991 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:45:10.991 -05:00 [INF] Date Time the request came: 06/15/2021 19:45:10
2021-06-15 19:45:10.991 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:45:10.991 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:45:10.991 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:45:10.991 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:45:10.996 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:45:11.000 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:11.541 -05:00 [INF] Executed DbCommand (96ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:45:11.741 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:11.746 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:11.751 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:45:11.837 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:45:12.002 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:45:12.003 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 167.3954ms.
2021-06-15 19:45:12.003 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 1007.7113ms
2021-06-15 19:45:12.003 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:45:12.004 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/388 - - - 200 - text/html;+charset=utf-8 1051.1157ms
2021-06-15 19:45:13.097 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/388 application/x-www-form-urlencoded 278
2021-06-15 19:45:13.102 -05:00 [INF] Authorization was successful.
2021-06-15 19:45:13.102 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:45:13.103 -05:00 [INF] Date Time the request came: 06/15/2021 19:45:13
2021-06-15 19:45:13.103 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:45:13.103 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:45:13.103 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:45:13.103 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:45:13.110 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:45:13.112 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:22.324 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:45:22.347 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:45:22.357 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:22.433 -05:00 [INF] Executed DbCommand (70ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:45:22.438 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:45:22.757 -05:00 [INF] Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:45:22.856 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:45:22.857 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 9746.3639ms
2021-06-15 19:45:22.857 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:45:22.860 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/388 application/x-www-form-urlencoded 278 - 302 0 - 9762.1415ms
2021-06-15 19:45:22.872 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:45:22.879 -05:00 [INF] Authorization was successful.
2021-06-15 19:45:22.879 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:45:22.879 -05:00 [INF] Date Time the request came: 06/15/2021 19:45:22
2021-06-15 19:45:22.879 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:45:22.879 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:45:22.879 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:45:22.879 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:45:22.883 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:45:22.887 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:45:22.897 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:45:22.910 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:45:22.911 -05:00 [INF] Executed ViewResult - view Success executed in 21.586ms.
2021-06-15 19:45:22.912 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 28.4579ms
2021-06-15 19:45:22.912 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:45:22.912 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 39.7803ms
2021-06-15 19:46:10.129 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:46:10.141 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-15 19:46:10.153 -05:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-06-15 19:46:10.154 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 302 0 - 25.6238ms
2021-06-15 19:46:10.156 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FUser%2FSuccess - -
2021-06-15 19:46:10.179 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:46:10.180 -05:00 [INF] Date Time the request came: 06/15/2021 19:46:10
2021-06-15 19:46:10.180 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:46:10.180 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 19:46:10.183 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login() on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 19:46:10.189 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:46:10.199 -05:00 [INF] Executing ViewResult, running view Login.
2021-06-15 19:46:10.265 -05:00 [INF] Executed ViewResult - view Login executed in 72.1256ms.
2021-06-15 19:46:10.266 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 82.0456ms
2021-06-15 19:46:10.266 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 19:46:10.267 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FUser%2FSuccess - - - 200 - text/html;+charset=utf-8 110.3758ms
2021-06-15 19:46:10.285 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:46:12.035 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:46:12.035 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:46:12.134 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 19:46:12.210 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 19:46:12.212 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 19:46:12.893 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 19:46:12.893 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 19:46:12.893 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 19:46:12.893 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 19:46:12.893 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 19:46:12.895 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 760.7271ms
2021-06-15 19:46:12.895 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 681.7635ms
2021-06-15 19:46:12.895 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 881.7767ms
2021-06-15 19:46:12.919 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 731.6425ms
2021-06-15 19:46:12.941 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 882.7575ms
2021-06-15 19:46:13.066 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - -
2021-06-15 19:46:13.066 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - -
2021-06-15 19:46:13.414 -05:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'
2021-06-15 19:46:13.417 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - - - 200 5867 application/javascript 375.9506ms
2021-06-15 19:46:13.418 -05:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery-validation/dist/jquery.validate.min.js'
2021-06-15 19:46:13.468 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.min.js - - - 200 23261 application/javascript 402.5985ms
2021-06-15 19:46:13.493 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 19:46:13.493 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 3208.1325ms
2021-06-15 19:46:13.887 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 19:46:13.914 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 19:46:13.915 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 27.1635ms
2021-06-15 19:47:08.712 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235
2021-06-15 19:47:08.733 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:08.766 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:08
2021-06-15 19:47:08.786 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:08.806 -05:00 [INF] Executing endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 19:47:08.830 -05:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ApplicationCore.Models.Request.LoginRequestModel) on controller MovieShop.MVC.Controllers.AccountController (MovieShopApp.MVC).
2021-06-15 19:47:08.846 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:08.997 -05:00 [INF] Executed DbCommand (72ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='300']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[HashedPassword], [u].[IsLocked], [u].[LastLoginDateTime], [u].[LastName], [u].[LockoutEndDate], [u].[PhoneNumber], [u].[Salt], [u].[TwoFactorEnabled]
FROM [User] AS [u]
WHERE [u].[Email] = @__email_0
2021-06-15 19:47:09.249 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 256), @p3='?' (Size = 128), @p4='?' (Size = 1024), @p5='?', @p6='?' (DbType = DateTime2), @p7='?' (Size = 128), @p8='?' (DbType = DateTime2), @p9='?' (Size = 16), @p10='?' (Size = 1024), @p11='?'], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
UPDATE [User] SET [AccessFailedCount] = @p0, [DateOfBirth] = @p1, [Email] = @p2, [FirstName] = @p3, [HashedPassword] = @p4, [IsLocked] = @p5, [LastLoginDateTime] = @p6, [LastName] = @p7, [LockoutEndDate] = @p8, [PhoneNumber] = @p9, [Salt] = @p10, [TwoFactorEnabled] = @p11
WHERE [Id] = @p12;
SELECT @@ROWCOUNT;
2021-06-15 19:47:09.355 -05:00 [INF] AuthenticationScheme: Cookies signed in.
2021-06-15 19:47:09.398 -05:00 [INF] Executing LocalRedirectResult, redirecting to /.
2021-06-15 19:47:09.418 -05:00 [INF] Executed action MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC) in 572.6985ms
2021-06-15 19:47:09.431 -05:00 [INF] Executed endpoint 'MovieShop.MVC.Controllers.AccountController.Login (MovieShopApp.MVC)'
2021-06-15 19:47:09.433 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 235 - 302 0 - 720.6810ms
2021-06-15 19:47:09.451 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:47:09.454 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:09.470 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:09
2021-06-15 19:47:09.470 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:09.470 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:09.470 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:09.470 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:09.472 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:47:09.494 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:47:09.515 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:09.545 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:09.553 -05:00 [INF] Executed ViewResult - view Index executed in 60.0708ms.
2021-06-15 19:47:09.570 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 77.5602ms
2021-06-15 19:47:09.582 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:47:09.583 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:47:09.584 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:47:09.584 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 19:47:09.584 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 19:47:09.594 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:09.787 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 19:47:09.787 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 336.2897ms
2021-06-15 19:47:09.787 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 19:47:09.787 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 19:47:09.813 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 228.4502ms
2021-06-15 19:47:09.812 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 202.6338ms
2021-06-15 19:47:09.813 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 229.9381ms
2021-06-15 19:47:10.011 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 19:47:10.014 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 19:47:10.033 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 19:47:10.034 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 449.2638ms
2021-06-15 19:47:10.160 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 451.8955ms
2021-06-15 19:47:10.160 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 19:47:10.160 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 222.7355ms
2021-06-15 19:47:19.573 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:47:19.577 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:19.577 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:19
2021-06-15 19:47:19.577 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:19.578 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:19.578 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:19.578 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:19.578 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:47:19.581 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:19.603 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:47:21.013 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:47:21.032 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:21.033 -05:00 [INF] Executed ViewResult - view Index executed in 19.6281ms.
2021-06-15 19:47:21.033 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1452.9203ms
2021-06-15 19:47:21.033 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:21.034 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1458.6200ms
2021-06-15 19:47:21.051 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:47:21.059 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:47:21.259 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:47:21.259 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 19:47:21.333 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 202.8904ms
2021-06-15 19:47:21.526 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 19:47:21.526 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 416.3158ms
2021-06-15 19:47:21.572 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 19:47:21.572 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 519.9484ms
2021-06-15 19:47:22.602 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - -
2021-06-15 19:47:22.606 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:22.606 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:22
2021-06-15 19:47:22.606 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:22.606 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:22.606 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:22.607 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:47:22.607 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:47:22.610 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:22.622 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:47:22.631 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:22.636 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:22.640 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:47:22.647 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:47:22.654 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:22.655 -05:00 [INF] Executed ViewResult - view Details executed in 8.4468ms.
2021-06-15 19:47:22.656 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 48.4433ms
2021-06-15 19:47:22.656 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:47:22.656 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/327 - - - 200 - text/html;+charset=utf-8 53.7507ms
2021-06-15 19:47:22.696 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 19:47:22.696 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 19:47:22.719 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 19:47:22.864 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 19:47:22.890 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 19:47:22.890 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 171.2137ms
2021-06-15 19:47:22.890 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 193.5497ms
2021-06-15 19:47:22.894 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 19:47:22.894 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 197.4991ms
2021-06-15 19:47:23.672 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:47:23.673 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:23.673 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:23
2021-06-15 19:47:23.673 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:23.673 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:23.673 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:23.674 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:23.674 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:47:23.676 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:23.701 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:47:25.010 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:47:25.018 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:25.019 -05:00 [INF] Executed ViewResult - view Index executed in 8.9399ms.
2021-06-15 19:47:25.019 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1343.7306ms
2021-06-15 19:47:25.019 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:47:25.019 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1346.3005ms
2021-06-15 19:47:26.678 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/303 - -
2021-06-15 19:47:26.680 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:26.680 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:26
2021-06-15 19:47:26.680 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:26.680 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:26.681 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:26.681 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:47:26.681 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:47:26.683 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:26.690 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:47:26.698 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:26.704 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:26.711 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:47:26.716 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:47:26.721 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:26.721 -05:00 [INF] Executed ViewResult - view Details executed in 6.0097ms.
2021-06-15 19:47:26.722 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 40.5186ms
2021-06-15 19:47:26.722 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:47:26.722 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/303 - - - 200 - text/html;+charset=utf-8 43.7300ms
2021-06-15 19:47:28.740 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/303 - -
2021-06-15 19:47:28.742 -05:00 [INF] Authorization was successful.
2021-06-15 19:47:28.742 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:28.742 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:28
2021-06-15 19:47:28.742 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:28.742 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:28.742 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:28.742 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:47:28.742 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:47:28.743 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:28.749 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:47:28.753 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:28.757 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:28.760 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:47:28.764 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:47:28.778 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:28.778 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 14.6808ms.
2021-06-15 19:47:28.778 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 36.0745ms
2021-06-15 19:47:28.779 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:47:28.779 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/303 - - - 200 - text/html;+charset=utf-8 38.3901ms
2021-06-15 19:47:29.877 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/303 application/x-www-form-urlencoded 278
2021-06-15 19:47:29.878 -05:00 [INF] Authorization was successful.
2021-06-15 19:47:29.878 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:29.878 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:29
2021-06-15 19:47:29.878 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:29.878 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:29.878 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:29.878 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:47:29.879 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:47:29.879 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:36.627 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:47:36.637 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:47:36.646 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:36.663 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:47:36.670 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:47:36.706 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:47:36.725 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:47:36.726 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 6843.4921ms
2021-06-15 19:47:36.726 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:47:36.731 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/303 application/x-www-form-urlencoded 278 - 302 0 - 6848.0814ms
2021-06-15 19:47:36.740 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:47:36.742 -05:00 [INF] Authorization was successful.
2021-06-15 19:47:36.742 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:47:36.742 -05:00 [INF] Date Time the request came: 06/15/2021 19:47:36
2021-06-15 19:47:36.742 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:47:36.742 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:47:36.742 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:47:36.742 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:47:36.742 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:47:36.744 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:47:36.745 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:47:36.749 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:47:36.750 -05:00 [INF] Executed ViewResult - view Success executed in 5.7067ms.
2021-06-15 19:47:36.750 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 8.0815ms
2021-06-15 19:47:36.751 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:47:36.751 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 11.2227ms
2021-06-15 19:47:39.986 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -
2021-06-15 19:47:40.063 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - -
2021-06-15 19:47:40.116 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'
2021-06-15 19:47:40.117 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 311949 text/plain 130.4164ms
2021-06-15 19:47:40.124 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'
2021-06-15 19:47:40.124 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 625953 text/plain 61.0099ms
2021-06-15 19:48:20.127 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:48:20.131 -05:00 [INF] Authorization was successful.
2021-06-15 19:48:20.131 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:48:20.132 -05:00 [INF] Date Time the request came: 06/15/2021 19:48:20
2021-06-15 19:48:20.132 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:48:20.132 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:48:20.132 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:48:20.132 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:20.132 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:48:20.144 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:48:20.145 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:48:20.178 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:48:20.180 -05:00 [INF] Executed ViewResult - view Success executed in 35.2311ms.
2021-06-15 19:48:20.180 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 47.5644ms
2021-06-15 19:48:20.180 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:20.181 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 54.3840ms
2021-06-15 19:48:20.231 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -
2021-06-15 19:48:20.233 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - -
2021-06-15 19:48:20.409 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 19:48:20.486 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 19:48:20.486 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 77.0350ms
2021-06-15 19:48:20.776 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'
2021-06-15 19:48:20.777 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 311949 text/plain 545.9798ms
2021-06-15 19:48:20.777 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'
2021-06-15 19:48:20.777 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 625953 text/plain 544.2365ms
2021-06-15 19:48:21.845 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:48:21.846 -05:00 [INF] Authorization was successful.
2021-06-15 19:48:21.846 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:48:21.846 -05:00 [INF] Date Time the request came: 06/15/2021 19:48:21
2021-06-15 19:48:21.846 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:48:21.846 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:48:21.846 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:48:21.846 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:21.846 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:48:21.848 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:48:21.849 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:48:21.854 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:48:21.855 -05:00 [INF] Executed ViewResult - view Success executed in 6.9189ms.
2021-06-15 19:48:21.856 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 9.4308ms
2021-06-15 19:48:21.856 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:21.856 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 11.1982ms
2021-06-15 19:48:21.879 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - -
2021-06-15 19:48:22.031 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -
2021-06-15 19:48:22.031 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 19:48:22.164 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 19:48:22.211 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 158.9892ms
2021-06-15 19:48:22.287 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'
2021-06-15 19:48:22.287 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 311949 text/plain 283.5765ms
2021-06-15 19:48:22.314 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'
2021-06-15 19:48:22.314 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 625953 text/plain 435.2558ms
2021-06-15 19:48:22.580 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:48:22.580 -05:00 [INF] Authorization was successful.
2021-06-15 19:48:22.580 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:48:22.580 -05:00 [INF] Date Time the request came: 06/15/2021 19:48:22
2021-06-15 19:48:22.580 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:48:22.581 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:48:22.581 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:48:22.581 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:22.581 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:48:22.582 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:48:22.586 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:48:22.591 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:48:22.592 -05:00 [INF] Executed ViewResult - view Success executed in 9.6105ms.
2021-06-15 19:48:22.593 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 12.3365ms
2021-06-15 19:48:22.593 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:22.593 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 13.7407ms
2021-06-15 19:48:22.615 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - -
2021-06-15 19:48:22.620 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'
2021-06-15 19:48:22.621 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 625953 text/plain 5.3281ms
2021-06-15 19:48:22.627 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -
2021-06-15 19:48:22.670 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 19:48:22.670 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'
2021-06-15 19:48:22.671 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 311949 text/plain 43.0352ms
2021-06-15 19:48:22.744 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 19:48:22.744 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 74.0161ms
2021-06-15 19:48:23.409 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:48:23.410 -05:00 [INF] Authorization was successful.
2021-06-15 19:48:23.410 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:48:23.410 -05:00 [INF] Date Time the request came: 06/15/2021 19:48:23
2021-06-15 19:48:23.410 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:48:23.410 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:48:23.410 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:48:23.410 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:23.410 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:48:23.411 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:48:23.411 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:48:23.415 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:48:23.415 -05:00 [INF] Executed ViewResult - view Success executed in 4.7494ms.
2021-06-15 19:48:23.416 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 5.4624ms
2021-06-15 19:48:23.416 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:48:23.416 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 6.8769ms
2021-06-15 19:48:23.450 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - -
2021-06-15 19:48:23.480 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - -
2021-06-15 19:48:23.481 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/favicon.ico - -
2021-06-15 19:48:23.527 -05:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/favicon.ico'
2021-06-15 19:48:23.527 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/favicon.ico - - - 200 32038 image/x-icon 46.5670ms
2021-06-15 19:48:23.527 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'
2021-06-15 19:48:23.528 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - - - 200 311949 text/plain 78.0943ms
2021-06-15 19:48:23.529 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css.map'
2021-06-15 19:48:23.529 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css.map - - - 200 625953 text/plain 48.9049ms
2021-06-15 19:52:20.011 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 19:52:20.936 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 19:52:21.012 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 19:52:21.016 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 19:52:21.016 -05:00 [INF] Hosting environment: Development
2021-06-15 19:52:21.016 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 19:52:22.904 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:52:23.050 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:23.054 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:23
2021-06-15 19:52:23.054 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:23.056 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:23.056 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:23.057 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:52:23.167 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:52:23.224 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:52:24.669 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:25.801 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:52:25.938 -05:00 [INF] Executed ViewResult - view Index executed in 2734.4367ms.
2021-06-15 19:52:25.953 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2783.0942ms
2021-06-15 19:52:25.954 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:52:26.046 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 3138.6625ms
2021-06-15 19:52:28.422 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:52:28.471 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:28.472 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:28
2021-06-15 19:52:28.472 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:28.472 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:28.472 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:28.472 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:52:28.490 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:52:28.513 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:28.723 -05:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:52:30.337 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:52:30.375 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:52:30.381 -05:00 [INF] Executed ViewResult - view Index executed in 45.9431ms.
2021-06-15 19:52:30.389 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1898.0112ms
2021-06-15 19:52:30.390 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:52:30.395 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1974.0396ms
2021-06-15 19:52:31.867 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/32 - -
2021-06-15 19:52:31.886 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:31.887 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:31
2021-06-15 19:52:31.887 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:31.887 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:31.887 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:31.888 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:52:31.926 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:52:31.950 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:32.108 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 19:52:32.252 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:52:32.361 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:32.390 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:32.414 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:52:32.454 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:52:32.488 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:52:32.491 -05:00 [INF] Executed ViewResult - view Details executed in 39.7359ms.
2021-06-15 19:52:32.492 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 566.4375ms
2021-06-15 19:52:32.493 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:52:32.494 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/32 - - - 200 - text/html;+charset=utf-8 627.9602ms
2021-06-15 19:52:33.275 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/32 - -
2021-06-15 19:52:33.311 -05:00 [INF] Authorization was successful.
2021-06-15 19:52:33.312 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:33.312 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:33
2021-06-15 19:52:33.312 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:33.312 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:33.312 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:33.312 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:52:33.316 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:52:33.321 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:33.692 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:52:33.701 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:33.705 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:33.826 -05:00 [INF] Executed DbCommand (72ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:52:33.915 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:52:34.099 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:52:34.101 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 187.6316ms.
2021-06-15 19:52:34.102 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 784.9187ms
2021-06-15 19:52:34.102 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:52:34.103 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/32 - - - 200 - text/html;+charset=utf-8 827.8780ms
2021-06-15 19:52:34.930 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/32 application/x-www-form-urlencoded 276
2021-06-15 19:52:34.935 -05:00 [INF] Authorization was successful.
2021-06-15 19:52:34.935 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:34.935 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:34
2021-06-15 19:52:34.935 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:34.935 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:34.935 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:34.935 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:52:34.944 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:52:34.945 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:39.406 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:52:39.421 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:52:39.433 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:39.436 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:52:39.440 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:52:39.763 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:52:39.846 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:52:39.853 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 4909.2004ms
2021-06-15 19:52:39.853 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:52:39.857 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/32 application/x-www-form-urlencoded 276 - 302 0 - 4926.0950ms
2021-06-15 19:52:39.871 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:52:39.874 -05:00 [INF] Authorization was successful.
2021-06-15 19:52:39.874 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:52:39.874 -05:00 [INF] Date Time the request came: 06/15/2021 19:52:39
2021-06-15 19:52:39.874 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:52:39.874 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:52:39.874 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:52:39.875 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:52:39.881 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:52:39.886 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:52:39.889 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:52:39.901 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:52:39.903 -05:00 [INF] Executed ViewResult - view Success executed in 14.9962ms.
2021-06-15 19:52:39.903 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 21.7927ms
2021-06-15 19:52:39.903 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:52:39.904 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 32.6718ms
2021-06-15 19:53:50.989 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:53:51.006 -05:00 [INF] Authorization was successful.
2021-06-15 19:53:51.006 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:53:51.006 -05:00 [INF] Date Time the request came: 06/15/2021 19:53:51
2021-06-15 19:53:51.006 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:53:51.007 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:53:51.007 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:53:51.007 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:53:51.008 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:53:51.027 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:53:51.030 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:53:51.052 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:53:51.075 -05:00 [INF] Executed ViewResult - view Success executed in 45.4562ms.
2021-06-15 19:53:51.075 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 67.0226ms
2021-06-15 19:53:51.075 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:53:51.077 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 87.7515ms
2021-06-15 19:54:10.796 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 19:54:11.950 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 19:54:12.001 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 19:54:12.005 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 19:54:12.005 -05:00 [INF] Hosting environment: Development
2021-06-15 19:54:12.005 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 19:54:13.864 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:54:14.000 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:14.004 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:14
2021-06-15 19:54:14.005 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:14.007 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:14.007 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:14.008 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:54:14.093 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:54:14.142 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:54:15.514 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:16.524 -05:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:54:16.714 -05:00 [INF] Executed ViewResult - view Index executed in 2590.8723ms.
2021-06-15 19:54:16.724 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2628.2733ms
2021-06-15 19:54:16.724 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:54:16.736 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 2875.7487ms
2021-06-15 19:54:29.997 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:54:30.050 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:30.051 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:30
2021-06-15 19:54:30.051 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:30.052 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:30.052 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:30.052 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:54:30.083 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:54:30.101 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:30.423 -05:00 [INF] Executed DbCommand (189ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:54:31.893 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:54:31.950 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:54:31.959 -05:00 [INF] Executed ViewResult - view Index executed in 68.029ms.
2021-06-15 19:54:31.962 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1878.8592ms
2021-06-15 19:54:31.963 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:54:31.977 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1977.3747ms
2021-06-15 19:54:33.732 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/177 - -
2021-06-15 19:54:33.746 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:33.746 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:33
2021-06-15 19:54:33.746 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:33.747 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:33.747 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:33.747 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:54:33.777 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:54:33.798 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:33.969 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 19:54:34.259 -05:00 [INF] Executed DbCommand (172ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:54:34.367 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:34.393 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:34.424 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:54:34.458 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:54:34.484 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:54:34.486 -05:00 [INF] Executed ViewResult - view Details executed in 29.349ms.
2021-06-15 19:54:34.487 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 710.0439ms
2021-06-15 19:54:34.487 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:54:34.488 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/177 - - - 200 - text/html;+charset=utf-8 757.1655ms
2021-06-15 19:54:35.553 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/177 - -
2021-06-15 19:54:35.590 -05:00 [INF] Authorization was successful.
2021-06-15 19:54:35.591 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:35.591 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:35
2021-06-15 19:54:35.591 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:35.592 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:35.592 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:35.592 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:54:35.597 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:54:35.602 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:36.160 -05:00 [INF] Executed DbCommand (71ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:54:36.384 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:36.388 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:36.392 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:54:36.482 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:54:36.662 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:54:36.665 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 184.2062ms.
2021-06-15 19:54:36.665 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 1067.527ms
2021-06-15 19:54:36.665 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:54:36.668 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/177 - - - 200 - text/html;+charset=utf-8 1115.3315ms
2021-06-15 19:54:37.298 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/177 application/x-www-form-urlencoded 278
2021-06-15 19:54:37.303 -05:00 [INF] Authorization was successful.
2021-06-15 19:54:37.304 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:37.304 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:37
2021-06-15 19:54:37.304 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:37.304 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:37.304 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:37.304 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:54:37.312 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:54:37.314 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:37.384 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:54:37.683 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:54:37.689 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:37.812 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:54:37.910 -05:00 [INF] Executed DbCommand (96ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:54:38.129 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:54:38.194 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:54:38.195 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 882.993ms
2021-06-15 19:54:38.195 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:54:38.196 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/177 application/x-www-form-urlencoded 278 - 302 0 - 898.3805ms
2021-06-15 19:54:38.202 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:54:38.204 -05:00 [INF] Authorization was successful.
2021-06-15 19:54:38.204 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:54:38.204 -05:00 [INF] Date Time the request came: 06/15/2021 19:54:38
2021-06-15 19:54:38.204 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:54:38.204 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:54:38.204 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:54:38.204 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:54:38.208 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:54:38.211 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:54:38.215 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:54:38.225 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:54:38.227 -05:00 [INF] Executed ViewResult - view Success executed in 13.0352ms.
2021-06-15 19:54:38.227 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 19.5881ms
2021-06-15 19:54:38.227 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:54:38.227 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 25.5212ms
2021-06-15 19:56:03.831 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:56:03.837 -05:00 [INF] Authorization was successful.
2021-06-15 19:56:03.838 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:03.838 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:03
2021-06-15 19:56:03.838 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:03.838 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:03.838 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:03.839 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:56:03.841 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:56:03.858 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:03.862 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:56:03.892 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:03.894 -05:00 [INF] Executed ViewResult - view Success executed in 32.9843ms.
2021-06-15 19:56:03.895 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 53.6377ms
2021-06-15 19:56:03.895 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:56:03.896 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 66.1100ms
2021-06-15 19:56:21.358 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 19:56:22.233 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 19:56:22.237 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 19:56:22.289 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 19:56:22.290 -05:00 [INF] Hosting environment: Development
2021-06-15 19:56:22.290 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 19:56:24.221 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:56:24.413 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:24.418 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:24
2021-06-15 19:56:24.418 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:24.421 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:24.421 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:24.423 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:56:24.536 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:56:24.604 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:56:25.896 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:26.756 -05:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:26.904 -05:00 [INF] Executed ViewResult - view Index executed in 2323.053ms.
2021-06-15 19:56:26.914 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2370.9905ms
2021-06-15 19:56:26.919 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:56:28.668 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:56:28.668 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:56:28.675 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 4454.3930ms
2021-06-15 19:56:28.883 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 19:56:28.883 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 19:56:28.883 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 19:56:28.898 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:56:29.299 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 19:56:29.389 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 504.1032ms
2021-06-15 19:56:29.584 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 19:56:29.811 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 1143.1256ms
2021-06-15 19:56:29.811 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 19:56:30.008 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 1240.2370ms
2021-06-15 19:56:30.386 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 19:56:30.386 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 19:56:30.458 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 1551.4309ms
2021-06-15 19:56:30.458 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 1550.7829ms
2021-06-15 19:56:30.605 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 19:56:30.606 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 1707.3615ms
2021-06-15 19:56:31.954 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:56:31.991 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:31.992 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:31
2021-06-15 19:56:31.992 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:31.992 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:31.992 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:31.992 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:56:32.011 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:56:32.026 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:32.257 -05:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:56:33.896 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:56:33.940 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:33.945 -05:00 [INF] Executed ViewResult - view Index executed in 51.845ms.
2021-06-15 19:56:33.948 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1936.6003ms
2021-06-15 19:56:33.948 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:56:33.950 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1997.0410ms
2021-06-15 19:56:36.793 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/166 - -
2021-06-15 19:56:36.800 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:36.800 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:36
2021-06-15 19:56:36.800 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:36.800 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:36.800 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:36.800 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:56:36.816 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:56:36.837 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:36.973 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 19:56:37.041 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:56:37.146 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:37.167 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:37.192 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:56:37.221 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:56:37.247 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:37.250 -05:00 [INF] Executed ViewResult - view Details executed in 30.5395ms.
2021-06-15 19:56:37.251 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 434.7842ms
2021-06-15 19:56:37.251 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:56:37.252 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/166 - - - 200 - text/html;+charset=utf-8 458.8624ms
2021-06-15 19:56:37.393 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 19:56:38.026 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 19:56:38.026 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 633.0667ms
2021-06-15 19:56:38.026 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 19:56:38.027 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 19:56:38.414 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 19:56:38.483 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 19:56:38.484 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 457.3310ms
2021-06-15 19:56:38.484 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 455.9942ms
2021-06-15 19:56:38.484 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/166 - -
2021-06-15 19:56:38.523 -05:00 [INF] Authorization was successful.
2021-06-15 19:56:38.524 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:38.525 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:38
2021-06-15 19:56:38.525 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:38.525 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:38.525 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:38.525 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:56:38.531 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:56:38.535 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:39.094 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:56:39.333 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:39.338 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:39.344 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:56:39.431 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:56:39.598 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:39.600 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 170.2397ms.
2021-06-15 19:56:39.600 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 1068.8844ms
2021-06-15 19:56:39.600 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:56:39.601 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/166 - - - 200 - text/html;+charset=utf-8 1117.8913ms
2021-06-15 19:56:40.632 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/166 application/x-www-form-urlencoded 278
2021-06-15 19:56:40.637 -05:00 [INF] Authorization was successful.
2021-06-15 19:56:40.637 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:40.637 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:40
2021-06-15 19:56:40.637 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:40.637 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:40.637 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:40.637 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:56:40.646 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:56:40.647 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:40.737 -05:00 [INF] Executed DbCommand (29ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:56:40.778 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:56:40.786 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:40.792 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:56:40.798 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:56:41.086 -05:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:56:41.157 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:56:41.157 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 511.3394ms
2021-06-15 19:56:41.158 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:56:41.159 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/166 application/x-www-form-urlencoded 278 - 302 0 - 527.2499ms
2021-06-15 19:56:41.164 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:56:41.166 -05:00 [INF] Authorization was successful.
2021-06-15 19:56:41.166 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:56:41.167 -05:00 [INF] Date Time the request came: 06/15/2021 19:56:41
2021-06-15 19:56:41.167 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:56:41.167 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:56:41.167 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:56:41.167 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:56:41.171 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:56:41.175 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:56:41.179 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:56:41.190 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:56:41.192 -05:00 [INF] Executed ViewResult - view Success executed in 14.0916ms.
2021-06-15 19:56:41.192 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 21.0405ms
2021-06-15 19:56:41.192 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:56:41.192 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 27.8857ms
2021-06-15 19:59:28.473 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 19:59:29.507 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 19:59:29.560 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 19:59:29.563 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 19:59:29.564 -05:00 [INF] Hosting environment: Development
2021-06-15 19:59:29.564 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 19:59:31.467 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:59:31.624 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:31.628 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:31
2021-06-15 19:59:31.628 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:31.630 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:31.630 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:31.632 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:31.729 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:59:31.799 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:59:33.331 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:34.198 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:34.394 -05:00 [INF] Executed ViewResult - view Index executed in 2622.6092ms.
2021-06-15 19:59:34.400 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2668.4992ms
2021-06-15 19:59:34.400 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:36.271 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 19:59:36.271 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 19:59:36.271 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 19:59:36.272 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 19:59:36.271 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 19:59:36.279 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 4813.6919ms
2021-06-15 19:59:36.331 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 19:59:36.718 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 19:59:36.890 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 521.1065ms
2021-06-15 19:59:37.283 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 19:59:37.335 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 19:59:37.562 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 1290.7552ms
2021-06-15 19:59:37.562 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 1290.8080ms
2021-06-15 19:59:37.773 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 19:59:37.772 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 19:59:37.773 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 19:59:37.773 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 1442.5722ms
2021-06-15 19:59:37.773 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 1502.6032ms
2021-06-15 19:59:37.773 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 1502.8118ms
2021-06-15 19:59:39.012 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 19:59:39.035 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:39.035 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:39
2021-06-15 19:59:39.035 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:39.035 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:39.035 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:39.035 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:39.114 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:59:39.136 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:39.408 -05:00 [INF] Executed DbCommand (141ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 19:59:42.014 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:59:42.127 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:42.140 -05:00 [INF] Executed ViewResult - view Index executed in 128.5512ms.
2021-06-15 19:59:42.148 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 3033.4495ms
2021-06-15 19:59:42.150 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:42.248 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 3235.8049ms
2021-06-15 19:59:49.611 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/263 - -
2021-06-15 19:59:49.625 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:49.625 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:49
2021-06-15 19:59:49.625 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:49.626 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:49.626 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:49.626 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:59:49.654 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 19:59:49.676 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:49.827 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 19:59:49.964 -05:00 [INF] Executed DbCommand (62ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:59:50.070 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:50.090 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:50.109 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:59:50.139 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 19:59:50.164 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:50.165 -05:00 [INF] Executed ViewResult - view Details executed in 28.0363ms.
2021-06-15 19:59:50.165 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 510.7342ms
2021-06-15 19:59:50.166 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 19:59:50.166 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/263 - - - 200 - text/html;+charset=utf-8 555.4809ms
2021-06-15 19:59:50.248 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 19:59:50.248 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 19:59:50.248 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 19:59:50.744 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 19:59:50.743 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 19:59:50.745 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 19:59:50.750 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 496.9211ms
2021-06-15 19:59:50.751 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 496.9663ms
2021-06-15 19:59:50.750 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 496.8075ms
2021-06-15 19:59:51.717 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/263 - -
2021-06-15 19:59:51.730 -05:00 [INF] Authorization was successful.
2021-06-15 19:59:51.731 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:51.731 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:51
2021-06-15 19:59:51.731 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:51.731 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:51.731 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:51.732 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:59:51.737 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:59:51.741 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:52.166 -05:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:59:52.178 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:52.184 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:52.190 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:59:52.281 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 19:59:52.465 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:52.466 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 187.008ms.
2021-06-15 19:59:52.467 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 730.2664ms
2021-06-15 19:59:52.468 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:59:52.470 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/263 - - - 200 - text/html;+charset=utf-8 753.3626ms
2021-06-15 19:59:53.341 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/263 application/x-www-form-urlencoded 278
2021-06-15 19:59:53.346 -05:00 [INF] Authorization was successful.
2021-06-15 19:59:53.347 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:53.347 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:53
2021-06-15 19:59:53.347 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:53.347 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:53.347 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:53.347 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:59:53.355 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:59:53.356 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:53.425 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 19:59:53.721 -05:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 19:59:53.728 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:53.731 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 19:59:53.734 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 19:59:53.968 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 19:59:54.031 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 19:59:54.032 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 676.4727ms
2021-06-15 19:59:54.032 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 19:59:54.033 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/263 application/x-www-form-urlencoded 278 - 302 0 - 692.0258ms
2021-06-15 19:59:54.047 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 19:59:54.049 -05:00 [INF] Authorization was successful.
2021-06-15 19:59:54.049 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:54.049 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:54
2021-06-15 19:59:54.049 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:54.049 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:54.049 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:54.049 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:59:54.052 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 19:59:54.055 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:54.059 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 19:59:54.071 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:54.072 -05:00 [INF] Executed ViewResult - view Success executed in 14.3478ms.
2021-06-15 19:59:54.072 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 20.484ms
2021-06-15 19:59:54.073 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 19:59:54.073 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 25.3157ms
2021-06-15 19:59:59.104 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 19:59:59.109 -05:00 [INF] Inside the Logger Middleware
2021-06-15 19:59:59.112 -05:00 [INF] Date Time the request came: 06/15/2021 19:59:59
2021-06-15 19:59:59.112 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 19:59:59.112 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 19:59:59.112 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 19:59:59.113 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:59.115 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 19:59:59.116 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 19:59:59.125 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 19:59:59.133 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 19:59:59.134 -05:00 [INF] Executed ViewResult - view Index executed in 18.7134ms.
2021-06-15 19:59:59.135 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 19.9ms
2021-06-15 19:59:59.135 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 19:59:59.135 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 32.0195ms
2021-06-15 20:02:21.083 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 20:02:22.060 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 20:02:22.138 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 20:02:22.142 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 20:02:22.143 -05:00 [INF] Hosting environment: Development
2021-06-15 20:02:22.143 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 20:02:23.420 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 20:02:23.586 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:23.592 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:23
2021-06-15 20:02:23.592 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:23.595 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:23.595 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:23.597 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:02:23.709 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 20:02:23.765 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:02:25.184 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:26.010 -05:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:02:26.184 -05:00 [INF] Executed ViewResult - view Index executed in 2439.6942ms.
2021-06-15 20:02:26.920 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2761.8688ms
2021-06-15 20:02:27.142 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:02:28.898 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 20:02:28.899 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 20:02:28.899 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 20:02:28.985 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 20:02:28.985 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 20:02:29.045 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 5625.4748ms
2021-06-15 20:02:29.202 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 20:02:29.542 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 20:02:29.621 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 722.2298ms
2021-06-15 20:02:30.163 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 20:02:30.163 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 20:02:30.167 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 966.1738ms
2021-06-15 20:02:30.167 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 1269.7830ms
2021-06-15 20:02:30.351 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 20:02:30.351 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 20:02:30.351 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 20:02:30.352 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 1367.6725ms
2021-06-15 20:02:30.352 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 1454.5454ms
2021-06-15 20:02:30.352 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 1367.6662ms
2021-06-15 20:02:31.802 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 20:02:31.817 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:31.818 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:31
2021-06-15 20:02:31.818 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:31.818 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:31.818 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:31.818 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:02:31.836 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:02:31.855 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:32.172 -05:00 [INF] Executed DbCommand (145ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 20:02:33.722 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:02:33.761 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:02:33.765 -05:00 [INF] Executed ViewResult - view Index executed in 46.0866ms.
2021-06-15 20:02:33.768 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1931.3414ms
2021-06-15 20:02:33.768 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:02:33.771 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1968.8921ms
2021-06-15 20:02:38.937 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/26 - -
2021-06-15 20:02:38.952 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:38.952 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:38
2021-06-15 20:02:38.952 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:38.953 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:38.953 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:38.953 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:02:38.984 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:02:39.007 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:39.139 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 20:02:39.360 -05:00 [INF] Executed DbCommand (175ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:02:39.480 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:39.507 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:39.528 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:02:39.557 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 20:02:39.582 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:02:39.584 -05:00 [INF] Executed ViewResult - view Details executed in 27.7757ms.
2021-06-15 20:02:39.584 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 599.9442ms
2021-06-15 20:02:39.584 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:02:39.585 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/26 - - - 200 - text/html;+charset=utf-8 649.4137ms
2021-06-15 20:02:39.631 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 20:02:39.631 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 20:02:39.631 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 20:02:39.921 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 20:02:39.973 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 20:02:39.973 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 338.5834ms
2021-06-15 20:02:39.974 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 20:02:39.974 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 343.0081ms
2021-06-15 20:02:40.069 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 343.9536ms
2021-06-15 20:02:41.239 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/26 - -
2021-06-15 20:02:41.276 -05:00 [INF] Authorization was successful.
2021-06-15 20:02:41.278 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:41.278 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:41
2021-06-15 20:02:41.278 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:41.278 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:41.278 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:41.278 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:02:41.283 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:02:41.288 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:41.737 -05:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:02:41.912 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:41.916 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:41.921 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:02:42.017 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 20:02:42.191 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:02:42.193 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 177.4099ms.
2021-06-15 20:02:42.194 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 910.4863ms
2021-06-15 20:02:42.194 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:02:42.196 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/26 - - - 200 - text/html;+charset=utf-8 956.6019ms
2021-06-15 20:02:42.989 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/26 application/x-www-form-urlencoded 276
2021-06-15 20:02:42.994 -05:00 [INF] Authorization was successful.
2021-06-15 20:02:42.994 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:42.994 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:42
2021-06-15 20:02:42.994 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:42.994 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:42.994 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:42.994 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:02:43.004 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:02:43.006 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:43.097 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 20:02:43.306 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:02:43.311 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:43.314 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:02:43.318 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:02:43.537 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 20:02:43.603 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 20:02:43.603 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 599.3317ms
2021-06-15 20:02:43.603 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:02:43.605 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/26 application/x-www-form-urlencoded 276 - 302 0 - 615.8458ms
2021-06-15 20:02:43.609 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 20:02:43.610 -05:00 [INF] Authorization was successful.
2021-06-15 20:02:43.610 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:02:43.610 -05:00 [INF] Date Time the request came: 06/15/2021 20:02:43
2021-06-15 20:02:43.611 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:02:43.611 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:02:43.611 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:02:43.611 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:02:43.613 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:02:43.617 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:02:43.620 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 20:02:43.631 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:02:43.633 -05:00 [INF] Executed ViewResult - view Success executed in 13.4945ms.
2021-06-15 20:02:43.633 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 19.4189ms
2021-06-15 20:02:43.633 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:02:43.633 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 24.6047ms
2021-06-15 20:04:03.344 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 20:04:04.208 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 20:04:04.211 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 20:04:04.313 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 20:04:04.314 -05:00 [INF] Hosting environment: Development
2021-06-15 20:04:04.315 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 20:04:05.892 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 20:04:06.076 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:06.082 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:06
2021-06-15 20:04:06.082 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:06.085 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:06.085 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:06.087 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:06.203 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 20:04:06.269 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:04:07.607 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:08.434 -05:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:08.608 -05:00 [INF] Executed ViewResult - view Index executed in 2362.2437ms.
2021-06-15 20:04:08.657 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2420.1617ms
2021-06-15 20:04:08.756 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:10.886 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 20:04:10.886 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 20:04:10.886 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 20:04:10.909 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 20:04:10.949 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 20:04:10.984 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 5061.9629ms
2021-06-15 20:04:11.093 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 20:04:12.051 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 20:04:12.051 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 20:04:12.051 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 20:04:12.057 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 1169.4882ms
2021-06-15 20:04:12.057 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 1170.0418ms
2021-06-15 20:04:12.057 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 1169.9833ms
2021-06-15 20:04:12.341 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 20:04:12.365 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 20:04:12.442 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 1506.5267ms
2021-06-15 20:04:12.442 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 1443.5960ms
2021-06-15 20:04:12.493 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 20:04:12.494 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 1400.8846ms
2021-06-15 20:04:14.386 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 20:04:14.424 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:14.425 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:14
2021-06-15 20:04:14.425 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:14.425 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:14.425 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:14.426 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:14.444 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:04:14.464 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:14.734 -05:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 20:04:16.420 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:04:16.460 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:16.465 -05:00 [INF] Executed ViewResult - view Index executed in 47.0474ms.
2021-06-15 20:04:16.468 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 2023.3583ms
2021-06-15 20:04:16.468 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:16.471 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 2085.3015ms
2021-06-15 20:04:24.420 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - -
2021-06-15 20:04:24.436 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:24.437 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:24
2021-06-15 20:04:24.437 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:24.437 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:24.437 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:24.437 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:24.470 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:04:24.494 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:24.632 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 20:04:24.819 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:24.937 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:24.964 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:24.991 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:25.030 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 20:04:25.062 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:25.064 -05:00 [INF] Executed ViewResult - view Details executed in 36.1702ms.
2021-06-15 20:04:25.065 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 595.21ms
2021-06-15 20:04:25.065 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:25.066 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - - - 200 - text/html;+charset=utf-8 645.9392ms
2021-06-15 20:04:25.120 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 20:04:25.120 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 20:04:25.120 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 20:04:25.420 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 20:04:25.421 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 20:04:25.421 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 20:04:25.421 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 301.0568ms
2021-06-15 20:04:25.421 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 301.1688ms
2021-06-15 20:04:25.421 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 300.6279ms
2021-06-15 20:04:26.368 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - -
2021-06-15 20:04:26.394 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:26.396 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:26.396 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:26
2021-06-15 20:04:26.396 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:26.396 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:26.396 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:26.396 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:26.401 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:26.405 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:26.791 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:26.802 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:26.809 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:26.815 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:26.917 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 20:04:27.130 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:27.132 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 216.2285ms.
2021-06-15 20:04:27.132 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 730.62ms
2021-06-15 20:04:27.132 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:27.133 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - - - 200 - text/html;+charset=utf-8 764.9171ms
2021-06-15 20:04:28.084 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/229 application/x-www-form-urlencoded 278
2021-06-15 20:04:28.089 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:28.090 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:28.090 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:28
2021-06-15 20:04:28.090 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:28.090 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:28.090 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:28.090 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:28.098 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:28.100 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:28.163 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 20:04:28.411 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 312.0422ms
2021-06-15 20:04:28.411 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:28.412 -05:00 [ERR] An unhandled exception has occurred while executing the request.
ApplicationCore.Exceptions.ConflictException: Movie already Purchased
   at Infrastructure.Services.UserService.PurchaseMovie(PurchaseRequestModel purchaseRequest) in /Users/saige/RiderProjects/MovieShopApp/Infrastructure/Services/UserService.cs:line 145
   at MovieShopApp.MVC.Controllers.UserController.PurchaseMovie(PurchaseRequestModel purchaseRequestModel) in /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/Controllers/UserController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-06-15 20:04:28.521 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/229 application/x-www-form-urlencoded 278 - 500 - text/html;+charset=utf-8 437.1073ms
2021-06-15 20:04:29.874 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - -
2021-06-15 20:04:29.882 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:29.883 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:29.883 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:29
2021-06-15 20:04:29.883 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:29.884 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:29.884 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:29.884 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:29.888 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:29.899 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:29.991 -05:00 [INF] Executed DbCommand (81ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:29.997 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:30.000 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:30.004 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:30.008 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 20:04:30.019 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:30.021 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 13.1529ms.
2021-06-15 20:04:30.021 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 132.636ms
2021-06-15 20:04:30.021 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:30.022 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/229 - - - 200 - text/html;+charset=utf-8 148.5732ms
2021-06-15 20:04:30.733 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - -
2021-06-15 20:04:30.734 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:30.735 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:30
2021-06-15 20:04:30.735 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:30.735 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:30.735 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:30.735 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:30.735 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:04:30.736 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:30.742 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:30.747 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:30.750 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:30.777 -05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:30.780 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 20:04:30.788 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:30.789 -05:00 [INF] Executed ViewResult - view Details executed in 8.6881ms.
2021-06-15 20:04:30.789 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 54.0488ms
2021-06-15 20:04:30.789 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:30.789 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/229 - - - 200 - text/html;+charset=utf-8 56.1299ms
2021-06-15 20:04:31.727 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 20:04:31.728 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:31.729 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:31
2021-06-15 20:04:31.729 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:31.729 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:31.729 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:31.729 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:31.729 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:04:31.731 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:31.748 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 20:04:33.197 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:04:33.209 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:33.210 -05:00 [INF] Executed ViewResult - view Index executed in 13.4245ms.
2021-06-15 20:04:33.210 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1480.2622ms
2021-06-15 20:04:33.210 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:33.210 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1484.0211ms
2021-06-15 20:04:35.232 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/22 - -
2021-06-15 20:04:35.233 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:35.233 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:35
2021-06-15 20:04:35.234 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:35.234 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:35.234 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:35.234 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:35.234 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:04:35.236 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:35.243 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:35.249 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:35.254 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:35.259 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:35.265 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 20:04:35.271 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:35.273 -05:00 [INF] Executed ViewResult - view Details executed in 7.8547ms.
2021-06-15 20:04:35.273 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 39.1909ms
2021-06-15 20:04:35.274 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:04:35.274 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/22 - - - 200 - text/html;+charset=utf-8 42.6011ms
2021-06-15 20:04:36.355 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/22 - -
2021-06-15 20:04:36.356 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:36.356 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:36.356 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:36
2021-06-15 20:04:36.356 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:36.356 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:36.356 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:36.356 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:36.356 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:36.357 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:36.367 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:36.374 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:36.377 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:36.381 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:36.385 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 20:04:36.391 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:36.392 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 6.8876ms.
2021-06-15 20:04:36.392 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 35.3022ms
2021-06-15 20:04:36.392 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:36.392 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/22 - - - 200 - text/html;+charset=utf-8 37.4779ms
2021-06-15 20:04:37.198 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/22 application/x-www-form-urlencoded 276
2021-06-15 20:04:37.198 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:37.198 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:37.198 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:37
2021-06-15 20:04:37.198 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:37.198 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:37.198 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:37.198 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:37.199 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:37.200 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:37.208 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 20:04:37.213 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:04:37.217 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:37.221 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:04:37.225 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:04:37.504 -05:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 20:04:37.586 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 20:04:37.587 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 388.1032ms
2021-06-15 20:04:37.587 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:04:37.588 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/22 application/x-www-form-urlencoded 276 - 302 0 - 390.4141ms
2021-06-15 20:04:37.592 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 20:04:37.593 -05:00 [INF] Authorization was successful.
2021-06-15 20:04:37.593 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:37.593 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:37
2021-06-15 20:04:37.593 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:37.593 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:37.593 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:37.593 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:04:37.596 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:04:37.598 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:37.601 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 20:04:37.613 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:37.615 -05:00 [INF] Executed ViewResult - view Success executed in 15.0546ms.
2021-06-15 20:04:37.615 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 18.866ms
2021-06-15 20:04:37.615 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:04:37.615 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 23.4271ms
2021-06-15 20:04:38.643 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 20:04:38.644 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:04:38.644 -05:00 [INF] Date Time the request came: 06/15/2021 20:04:38
2021-06-15 20:04:38.644 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:04:38.645 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:04:38.645 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:04:38.645 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:38.645 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 20:04:38.646 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:04:38.648 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:04:38.654 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:04:38.655 -05:00 [INF] Executed ViewResult - view Index executed in 9.3978ms.
2021-06-15 20:04:38.655 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 10.2148ms
2021-06-15 20:04:38.655 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:04:38.656 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 12.8161ms
2021-06-15 20:05:51.988 -05:00 [INF] User profile is available. Using '/Users/saige/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-15 20:05:53.004 -05:00 [INF] Now listening on: https://localhost:5001
2021-06-15 20:05:53.076 -05:00 [INF] Now listening on: http://localhost:5000
2021-06-15 20:05:53.106 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-15 20:05:53.109 -05:00 [INF] Hosting environment: Development
2021-06-15 20:05:53.137 -05:00 [INF] Content root path: /Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC
2021-06-15 20:05:54.613 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 20:05:54.767 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:05:54.772 -05:00 [INF] Date Time the request came: 06/15/2021 20:05:54
2021-06-15 20:05:54.772 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:05:54.775 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:05:54.775 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:05:54.776 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:05:54.867 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 20:05:54.919 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:05:56.197 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:05:57.034 -05:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:05:57.180 -05:00 [INF] Executed ViewResult - view Index executed in 2279.0202ms.
2021-06-15 20:05:57.188 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 2318.3372ms
2021-06-15 20:05:57.189 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:05:59.137 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - -
2021-06-15 20:05:59.137 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/css/site.css - -
2021-06-15 20:05:59.137 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - -
2021-06-15 20:05:59.137 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - -
2021-06-15 20:05:59.173 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 4530.7229ms
2021-06-15 20:05:59.201 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - -
2021-06-15 20:05:59.294 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - -
2021-06-15 20:06:00.225 -05:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/js/site.js'
2021-06-15 20:06:00.225 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/css/all.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/css/all.min.css'
2021-06-15 20:06:00.226 -05:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/css/site.css'
2021-06-15 20:06:00.306 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/css/all.min.css - - - 200 59344 text/css 1192.6498ms
2021-06-15 20:06:00.306 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/js/site.js?v=BxFAw9RUJ1E4NycpKEjCNDeoSvr4RPHixdBq5wDnkeY - - - 200 226 application/javascript 1193.1777ms
2021-06-15 20:06:00.307 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/css/site.css - - - 200 1116 text/css 1192.7995ms
2021-06-15 20:06:00.665 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/css/bootstrap.min.css'
2021-06-15 20:06:00.665 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js'
2021-06-15 20:06:00.665 -05:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/jquery/dist/jquery.min.js'
2021-06-15 20:06:00.666 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.min.css - - - 200 155758 text/css 1371.5266ms
2021-06-15 20:06:00.666 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/jquery/dist/jquery.min.js - - - 200 89476 application/javascript 1553.7285ms
2021-06-15 20:06:00.666 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.bundle.min.js - - - 200 78635 application/javascript 1465.1790ms
2021-06-15 20:06:01.642 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/movie - -
2021-06-15 20:06:01.690 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:01.690 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:01
2021-06-15 20:06:01.691 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:01.691 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:01.691 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:01.691 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:06:01.710 -05:00 [INF] Route matched with {action = "Index", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Index() on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:06:01.729 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:01.952 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='300']
SELECT [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
FROM [Movie] AS [m]
2021-06-15 20:06:03.483 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:06:03.523 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:06:03.530 -05:00 [INF] Executed ViewResult - view Index executed in 48.2591ms.
2021-06-15 20:06:03.532 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC) in 1821.8339ms
2021-06-15 20:06:03.533 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Index (MovieShopApp.MVC)'
2021-06-15 20:06:03.535 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/movie - - - 200 - text/html;+charset=utf-8 1894.9582ms
2021-06-15 20:06:24.240 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Movie/Details/252 - -
2021-06-15 20:06:24.268 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:24.269 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:24
2021-06-15 20:06:24.269 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:24.269 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:24.269 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:24.269 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:06:24.292 -05:00 [INF] Route matched with {action = "Details", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Details(Int32) on controller MovieShopApp.MVC.Controllers.MovieController (MovieShopApp.MVC).
2021-06-15 20:06:24.316 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:24.487 -05:00 [WRN] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
2021-06-15 20:06:24.556 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:06:24.673 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:24.705 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:24.727 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:06:24.762 -05:00 [INF] Executing ViewResult, running view Details.
2021-06-15 20:06:24.797 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:06:24.799 -05:00 [INF] Executed ViewResult - view Details executed in 38.694ms.
2021-06-15 20:06:24.800 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC) in 507.1612ms
2021-06-15 20:06:24.800 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.MovieController.Details (MovieShopApp.MVC)'
2021-06-15 20:06:24.801 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Movie/Details/252 - - - 200 - text/html;+charset=utf-8 560.5973ms
2021-06-15 20:06:24.858 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - -
2021-06-15 20:06:24.858 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - -
2021-06-15 20:06:24.858 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - -
2021-06-15 20:06:25.265 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-regular-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-regular-400.woff2'
2021-06-15 20:06:25.269 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-brands-400.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-brands-400.woff2'
2021-06-15 20:06:25.269 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-regular-400.woff2 - - - 200 13276 font/woff2 409.9273ms
2021-06-15 20:06:25.270 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-brands-400.woff2 - - - 200 76764 font/woff2 411.9415ms
2021-06-15 20:06:25.270 -05:00 [INF] Sending file. Request path: '/lib/font-awesome/webfonts/fa-solid-900.woff2'. Physical path: '/Users/saige/RiderProjects/MovieShopApp/MovieShopApp.MVC/wwwroot/lib/font-awesome/webfonts/fa-solid-900.woff2'
2021-06-15 20:06:25.271 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/lib/font-awesome/webfonts/fa-solid-900.woff2 - - - 200 78196 font/woff2 413.3815ms
2021-06-15 20:06:25.649 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/252 - -
2021-06-15 20:06:25.662 -05:00 [INF] Authorization was successful.
2021-06-15 20:06:25.663 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:25.663 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:25
2021-06-15 20:06:25.663 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:25.664 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:25.664 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:25.664 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:06:25.669 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(Int32) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:06:25.674 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:26.270 -05:00 [INF] Executed DbCommand (96ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:06:26.386 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:26.391 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:26.395 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:06:26.483 -05:00 [INF] Executing ViewResult, running view PurchaseMovie.
2021-06-15 20:06:26.660 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:06:26.662 -05:00 [INF] Executed ViewResult - view PurchaseMovie executed in 179.6729ms.
2021-06-15 20:06:26.662 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 992.8528ms
2021-06-15 20:06:26.662 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:06:26.663 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/PurchaseMovie/252 - - - 200 - text/html;+charset=utf-8 1014.2975ms
2021-06-15 20:06:27.466 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/252 application/x-www-form-urlencoded 278
2021-06-15 20:06:27.478 -05:00 [INF] Authorization was successful.
2021-06-15 20:06:27.478 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:27.479 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:27
2021-06-15 20:06:27.479 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:27.479 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:27.479 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:27.479 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:06:27.491 -05:00 [INF] Route matched with {action = "PurchaseMovie", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PurchaseMovie(ApplicationCore.Models.Request.PurchaseRequestModel) on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:06:27.493 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:27.587 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__purchaseRequest_UserId_0='?' (DbType = Int32), @__purchaseRequest_MovieId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Purchase] AS [p]
        WHERE ([p].[UserId] = @__purchaseRequest_UserId_0) AND ([p].[MovieId] = @__purchaseRequest_MovieId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-06-15 20:06:27.798 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [t].[Id], [t].[BackdropUrl], [t].[Budget], [t].[CreatedBy], [t].[CreatedDate], [t].[ImdbUrl], [t].[OriginalLanguage], [t].[Overview], [t].[PosterUrl], [t].[Price], [t].[ReleaseDate], [t].[Revenue], [t].[RunTime], [t].[Tagline], [t].[Title], [t].[TmdbUrl], [t].[UpdatedBy], [t].[UpdatedDate], [f].[Id], [f].[MovieId], [f].[UserId], [m0].[MovieId], [m0].[CastId], [m0].[Character]
FROM (
    SELECT TOP(1) [m].[Id], [m].[BackdropUrl], [m].[Budget], [m].[CreatedBy], [m].[CreatedDate], [m].[ImdbUrl], [m].[OriginalLanguage], [m].[Overview], [m].[PosterUrl], [m].[Price], [m].[ReleaseDate], [m].[Revenue], [m].[RunTime], [m].[Tagline], [m].[Title], [m].[TmdbUrl], [m].[UpdatedBy], [m].[UpdatedDate]
    FROM [Movie] AS [m]
    WHERE [m].[Id] = @__id_0
) AS [t]
LEFT JOIN [Favorite] AS [f] ON [t].[Id] = [f].[MovieId]
LEFT JOIN [MovieCast] AS [m0] ON [t].[Id] = [m0].[MovieId]
ORDER BY [t].[Id], [f].[Id], [m0].[MovieId], [m0].[CastId]
2021-06-15 20:06:27.815 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [c].[Id], [m].[Character], [c].[Name], [c].[ProfilePath]
FROM [MovieCast] AS [m]
INNER JOIN [Cast] AS [c] ON [m].[CastId] = [c].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:27.823 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [g].[Id], [g].[Name]
FROM [MovieGenre] AS [m]
INNER JOIN [Genre] AS [g] ON [m].[GenreId] = [g].[Id]
WHERE [m].[MovieId] = @__movieId_0
2021-06-15 20:06:27.830 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT [r].[MovieId], [r].[UserId], [r].[Rating], [r].[ReviewText]
FROM [Review] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2021-06-15 20:06:28.417 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SET NOCOUNT ON;
INSERT INTO [Purchase] ([MovieId], [PurchaseDateTime], [PurchaseNumber], [TotalPrice], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [Purchase]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2021-06-15 20:06:28.485 -05:00 [INF] Executing RedirectResult, redirecting to /User/Success.
2021-06-15 20:06:28.486 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC) in 994.8254ms
2021-06-15 20:06:28.486 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.PurchaseMovie (MovieShopApp.MVC)'
2021-06-15 20:06:28.488 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/User/PurchaseMovie/252 application/x-www-form-urlencoded 278 - 302 0 - 1021.9723ms
2021-06-15 20:06:28.490 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/User/Success - -
2021-06-15 20:06:28.492 -05:00 [INF] Authorization was successful.
2021-06-15 20:06:28.492 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:28.492 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:28
2021-06-15 20:06:28.492 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:28.492 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:28.492 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:28.492 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:06:28.495 -05:00 [INF] Route matched with {action = "Success", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Success() on controller MovieShopApp.MVC.Controllers.UserController (MovieShopApp.MVC).
2021-06-15 20:06:28.499 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:28.502 -05:00 [INF] Executing ViewResult, running view Success.
2021-06-15 20:06:28.514 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:06:28.516 -05:00 [INF] Executed ViewResult - view Success executed in 14.6969ms.
2021-06-15 20:06:28.516 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC) in 20.4167ms
2021-06-15 20:06:28.516 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.UserController.Success (MovieShopApp.MVC)'
2021-06-15 20:06:28.516 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/User/Success - - - 200 - text/html;+charset=utf-8 26.1772ms
2021-06-15 20:06:38.547 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/ - -
2021-06-15 20:06:38.555 -05:00 [INF] Inside the Logger Middleware
2021-06-15 20:06:38.555 -05:00 [INF] Date Time the request came: 06/15/2021 20:06:38
2021-06-15 20:06:38.555 -05:00 [INF] Ip Address Of User: ::1
2021-06-15 20:06:38.556 -05:00 [INF] Email Address saigezhang17@gmail.com
2021-06-15 20:06:38.556 -05:00 [INF] Name: Shiqi Zhang 
2021-06-15 20:06:38.556 -05:00 [INF] Executing endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:06:38.558 -05:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MovieShopApp.MVC.Controllers.HomeController (MovieShopApp.MVC).
2021-06-15 20:06:38.559 -05:00 [INF] Executing ViewResult, running view Index.
2021-06-15 20:06:38.566 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'MovieShopDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-15 20:06:38.574 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='300']
SELECT COUNT(*)
FROM [Purchase] AS [p]
WHERE [p].[UserId] = @__id_0
2021-06-15 20:06:38.576 -05:00 [INF] Executed ViewResult - view Index executed in 17.7473ms.
2021-06-15 20:06:38.577 -05:00 [INF] Executed action MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC) in 19.0565ms
2021-06-15 20:06:38.577 -05:00 [INF] Executed endpoint 'MovieShopApp.MVC.Controllers.HomeController.Index (MovieShopApp.MVC)'
2021-06-15 20:06:38.577 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 30.6890ms
